!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){t.exports=function(){return n(3)('!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}String.prototype.inString=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("object"!==n(e))throw new Error("Argument is not an array");return e.find(function(e){return e===t.toString()})},String.prototype.in=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("object"!==n(e))throw new Error("Argument is not an array");return e.find(function(e){return e===t.charCodeAt(r)})},String.prototype.split=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=[],r="",i=0;i<this.length;i++){if(n.length===e)return n;""===t?n.push(this[i]):this[i]!==t?r+=this[i]:(n.push(r),r="")}return""!==r.trim()&&n.push(r),n},String.prototype.reverseStr=function(){for(var t="",e=this.length-1;e>=0;e--)t+=this[e];return t},String.prototype.multipleSpaces=function(){for(var t="",e=0;e<this.length;e++)this.in([32,160,65279],e)&&this.in([32,160,65279],e+1)||(t+=this[e]);return t},String.prototype.hyphenSpaces=function(){for(var t="",e=0;e<this.length;e++)this.in([32,160,65279],e)&&(this.in([45,8208],e-1)||this.in([45,8208],e+1))||(t+=this[e]);return t}},function(t,e){Array.prototype.swap=function(t,e){var n=this[e];this[e]=this[t],this[t]=n},Array.prototype.isort=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-1,r=e+1;r<=n;r++)for(var i=r;i>0&&t(this[i],this[i-1]);i--)this.swap(i-1,i);return this},Array.prototype.qsort=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-1;if(void 0===t&&(t=function(t,e){return t<e?1:0}),"function"!=typeof t)throw new Error("Argument compareFn must be a function");if(n-e<=32)return this.isort(t,e,n);for(var r=e,i=n,o=this[Math.floor(e+Math.random()*(n+1-e))];r<=i;){for(;t(this[r],o);)r++;for(;t(o,this[i]);)i--;r<=i&&this.swap(r++,i--)}return e<i&&this.qsort(t,e,i),n>r&&this.qsort(t,r,n),this}},function(t,e,n){"use strict";n.r(e);n(0),n(1);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.goodSymbol=function(t){return e.goodSymbols.find(function(e){return t>=e[0]&&t<=e[1]})},this.hyphen=function(t,n){return e.goodSymbol(t.charCodeAt(n-1))&&e.goodSymbol(t.charCodeAt(n+1))},this.irrationalNumber=function(t,e){return Number.isInteger(Number.parseInt(t[e-1]))&&Number.isInteger(Number.parseInt(t[e+1]))},this.goodSymbols=[[48,57],[97,122],[1072,1103],[1105,1105]]}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"breakText",value:function(t){t=t.toLowerCase();for(var e=[],n="",r=0;r<t.length;r++)this.goodSymbol(t.charCodeAt(r))||t.in([45,8208],r)&&this.hyphen(t,r)||t.in([44],r)&&this.irrationalNumber(t,r)?n+=t[r]:""!==n.trim()&&(e.push(n),n="");return""!==n.trim()&&e.push(n),e}}]),t}();function o(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vowel=["a","e","i","o","u","y"],this.double=["bb","dd","ff","gg","mm","nn","pp","rr","tt"],this.li=["c","d","e","g","h","k","m","n","r","t"]}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"getR1",value:function(t){for(var e=0;e<t.length-1;){if(t[e].inString(this.vowel)&&!t[e+1].inString(this.vowel))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}},{key:"getR2",value:function(t){return this.getR1(t)}},{key:"stemWord",value:function(t){return t.length>2&&(t=this.removeInitialApostroph(t),t=this.setY(t),t=this.preparatoryStep(t),t=this.firstStepA(t),t=this.firstStepB(t),t=this.firstStepC(t),t=this.secondStep(t),t=this.thirdStep(t),t=this.fourthStep(t),t=this.fifthStep(t)),t.toLowerCase()}},{key:"removeInitialApostroph",value:function(t){return t[0].in([39,8217])?t.slice(1):t}},{key:"setY",value:function(t){"y"===(t=t.split(""))[0]&&(t[0]="Y");for(var e=1;e<t.length;e++)"y"===t[e]&&t[e-1].inString(this.vowel)&&(t[e]="Y");return t.join("")}},{key:"replaceMap",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.length,0);n<e.length;n++)for(var r=0;r<e[n].suffixes.length;r++)if(t.slice(t.length-e[n].suffixes[r].length)===e[n].suffixes[r]){var i=e[n].f(e[n].suffixes[r]);if(!1===i)continue;return i}return t}},{key:"preparatoryStep",value:function(t){var e=t.length,n={0:{suffixes:["\'s\'","\'s","\'"],f:function(t){return n.delete(t)}},delete:function(n){return t.slice(0,e-n.length)},length:1};return this.replaceMap(t,n)}},{key:"firstStepA",value:function(t){var e=this,n=t.length,r={0:{suffixes:["sses"],f:function(){return t.slice(0,n-4)+"ss"}},1:{suffixes:["ied","ies"],f:function(){return n-3>1?t.slice(0,n-3)+"i":t.slice(0,n-3)+"ie"}},2:{suffixes:["us","ss"],f:function(){return t}},3:{suffixes:["s"],f:function(){for(var r=2;r<t.length;r++)if(void 0!==t[n-r-1]&&t[n-r-1].inString(e.vowel))return t.slice(0,n-1);return t}},length:4};return this.replaceMap(t,r)}},{key:"firstStepB",value:function(t){var e=this,n=this.getR1(t),r=t.length,i={0:{suffixes:["eedly"],f:function(t){return i.eedly(t)}},1:{suffixes:["ingly","edly"],f:function(t){return i.ingly(t)}},2:{suffixes:["eed"],f:function(t){return i.eedly(t)}},3:{suffixes:["ing","ed"],f:function(e){var n=i.ingly(e);return!1===n?t:n}},eedly:function(t){return n[1].slice(n[1].length-t.length)===t&&n[0]+n[1].slice(0,n[1].length-t.length)+"ee"},ingly:function(n){for(var i=!1,o=0;o<r-n.length;o++)if(t[o].inString(e.vowel)){t=t.slice(0,r-n.length),r=t.length,i=!0;break}return!!i&&(t.slice(r-2).inString(["at","bl","iz"])?t+"e":t.slice(r-2).inString(e.double)?t.slice(0,r-1):e.isShort(t)?t+"e":t)},length:4};return this.replaceMap(t,i)}},{key:"firstStepC",value:function(t){t=t.split("");for(var e=0;e<t.length;e++)t[e].inString(["y","Y"])&&void 0!==t[e-1]&&!t[e-1].inString(this.vowel)&&e-1>0&&(t[e]="i");return t.join("")}},{key:"secondStep",value:function(t){var e=this,n=this.getR1(t),r=(t=n[1]).length,i={0:{suffixes:["ousness","iveness","fulness"],f:function(e){return t.slice(0,r-4)}},1:{suffixes:["ational","ization"],f:function(e){return t.slice(0,r-5)+"e"}},2:{suffixes:["tional","lessli"],f:function(e){return t.slice(0,r-2)}},3:{suffixes:["biliti"],f:function(e){return t.slice(0,r-5)+"e"}},4:{suffixes:["entli","ousli","fulli"],f:function(e){return t.slice(0,r-2)}},5:{suffixes:["ation","iviti"],f:function(e){return t.slice(0,r-3)+"e"}},6:{suffixes:["alism"],f:function(e){return t.slice(0,r-3)}},7:{suffixes:["enci","anci","abli"],f:function(e){return t.slice(0,r-1)+"e"}},8:{suffixes:["izer"],f:function(e){return t.slice(0,r-1)}},9:{suffixes:["ator"],f:function(e){return t.slice(0,r-2)+"e"}},10:{suffixes:["alli"],f:function(e){return t.slice(0,r-2)}},11:{suffixes:["bli"],f:function(e){return t.slice(0,r-1)+"e"}},12:{suffixes:["ogi"],f:function(e){return"l"===t[r-4]&&t.slice(0,r-1)}},13:{suffixes:["li"],f:function(n){return void 0!==t[r-3]&&t[r-3].inString(e.li)?t.slice(0,r-2):t}},length:14};return n[0]+this.replaceMap(n[1],i)}},{key:"thirdStep",value:function(t){var e=this,n=this.getR1(t),r=(t=n[1]).length,i={0:{suffixes:["ational"],f:function(e){return t.slice(0,r-5)+"e"}},1:{suffixes:["tional"],f:function(e){return t.slice(0,r-2)}},2:{suffixes:["alize","icate","iciti"],f:function(e){return t.slice(0,r-3)}},3:{suffixes:["ative"],f:function(n){var i=e.getR2(t);return i[1].slice(i[1].length-5)===n&&t.slice(0,r-5)}},4:{suffixes:["ical"],f:function(e){return t.slice(0,r-2)}},5:{suffixes:["ness","ful"],f:function(e){return t.slice(0,r-e.length)}},length:6};return n[0]+this.replaceMap(t,i)}},{key:"fourthStep",value:function(t){var e=this.getR1(t),n=this.getR2(e[1]),r=(t=n[1]).length,i={0:{suffixes:["ement","ance","ence","able","ible","ment","ant","ent","ism","ate","iti","ous","ive","ize"],f:function(e){return t.slice(0,r-e.length)}},1:{suffixes:["ion"],f:function(e){return!(void 0===t[r-4]||!t[r-4].inString(["s","t"]))&&t.slice(0,r-3)}},2:{suffixes:["al","er","ic"],f:function(e){return t.slice(0,r-2)}},length:3};return e[0]+n[0]+this.replaceMap(t,i)}},{key:"fifthStep",value:function(t){var e=this,n=this.getR1(t),r=(t=n[1]).length,i={0:{suffixes:["e"],f:function(n){var i=e.getR2(t);return("e"===i[1][i[1].length-1]||!e.isShortSyllable(t.slice(r-4,r-1)))&&t.slice(0,r-1)}},1:{suffixes:["l"],f:function(n){var i=e.getR2(t);return"l"===i[1][i[1].length-1]?t.slice(0,r-1):t}},length:2};return n[0]+this.replaceMap(t,i)}},{key:"isShortSyllable",value:function(t){return!(3!==t.length||t[0].inString(this.vowel)||!t[1].inString(this.vowel)||t[2].inString(o(this.vowel).concat(["w","x","Y"])))||!(2!==t.length||!t[0].inString(this.vowel)||t[1].inString(this.vowel))}},{key:"isShort",value:function(t){t.length;return""===this.getR1(t)[1]&&this.isShortSyllable(t.substr(-3))}}]),t}(),l=[["вшись","вши","в"],["ывшись","ившись","ывши","ивши","ив","ыв"],[6,5,4,3,2,1]],f=[["его","ого","ему","ому","ими","ыми","ее","ие","ые","ое","ей","ий","ый","ой","ем","им","ым","ом","их","ых","ую","юю","ая","яя","ою","ею"],[3,2]],a=[["ем","нн","вш","ющ","щ"],["ивш","ывш","ующ"],[3,2,1]],c=[["ся","сь"],[2]],h=[["ете","йте","ешь","нно","ла","на","ли","ем","ло","но","ет","ют","ны","ть","н","й","л"],["ейте","уйте","ует","уют","ило","ыло","ено","ила","ыла","ена","ите","или","ены","ить","ыть","ишь","ыли","ей","уй","ил","ыл","им","ым","ен","ят","ит","ыт","ую","ю"],[4,3,2,1]],g=[["иями","ями","ами","ией","иях","иям","ием","ев","ов","ие","ье","еи","ии","ей","ой","ий","ям","ем","ам","ом","ах","ях","ию","ью","ю","ия","ья","ю","и","о","у","ы","ь","й","е","а","я"],[4,3,2,1]],p=[["ейше","ейш"],[4,3]],v=[["ость","ост"],[4,3]];function y(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vowelCodes=["а","е","ё","и","о","у","ы","э","ю","я"]}return function(t,e,n){e&&d(t.prototype,e),n&&d(t,n)}(t,[{key:"getRV",value:function(t){for(var e=0;e<t.length-1;){if(!t[e].inString(y(this.vowelCodes).concat(["ь","ъ"]))&&t[e+1].inString(this.vowelCodes))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}},{key:"getR1",value:function(t){for(var e=0;e<t.length-1;){if(t[e].inString(this.vowelCodes)&&!t[e+1].inString(y(this.vowelCodes).concat(["ь","ъ"])))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}},{key:"getR2",value:function(t){return this.getR1(t)}},{key:"stemWord",value:function(t){var e,n,r,i,o,s,u;if(t.length<=2)return t;var l=[];1===(t=t.split("-")).length&&(t=t[0].split(String.fromCharCode(8208)));for(var f=0;f<t.length;f++)if(e=this.getRV(t[f])[0],!1!==(i=this.firstStep(t[f]))){o=this.secondStep(i),n=this.getR1(e+o),r=this.getR2(n[1]),s=this.thirdStep(r[1]);var a=this.getRV(n[0]+r[0]+s);u=this.fourthStep(a[1]),l.push(a[0]+u)}else l.push(t[f]);return t.length>=2?l.join("-"):l[0]}},{key:"findEnding",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e,i=[],o=0,s=3===t.length?t[2]:t[1],u=0;u<s.length;u++)if(e.length>=s[u]&&(o=e.length-s[u],r=e.slice(o),i=3===t.length?e.in([1072,1103],o-1)||void 0===e[o-1]&&n?t[0]:t[1]:t[0],r.inString(i)))return this.unDoubleN(e.slice(0,e.length-r.length));return!1}},{key:"firstStep",value:function(t){var e,n,r=!1,i=this.getRV(t)[0],o=this.getRV(t)[1];return!1!==(n=this.findEnding(l,t))?this.getRV(n)[1]:""!==o&&(!1!==(n=this.findEnding(c,o))&&(r=!0,o=this.unDoubleN(n)),!1!==(n=this.findEnding(f,o))?!1!==(e=this.findEnding(a,n,i[i.length-1].inString(["а","я"])))?e:n:!1!==(n=this.findEnding(h,o,i[i.length-1].inString(["а","я"])))?n:r||!1===(n=this.findEnding(g,o))?o:n)}},{key:"secondStep",value:function(t){return"и"===t[t.length-1]?t.slice(0,t.length-1):t}},{key:"thirdStep",value:function(t){if(t.length>=3){var e=this.findEnding(v,t);return!1!==e?e:t}return t}},{key:"fourthStep",value:function(t){var e;return(e=this.unDoubleN(t))!==t?e:!1!==(e=this.findEnding(p,t))?this.unDoubleN(e):"ь"===t[t.length-1]?t.slice(0,t.length-1):t}},{key:"unDoubleN",value:function(t){return"н"===t[t.length-1]&&"н"===t[t.length-2]?t.slice(0,t.length-1):t}}]),t}();function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var S=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.en=new u,this.rus=new b}return function(t,e,n){e&&m(t.prototype,e),n&&m(t,n)}(t,[{key:"stemWords",value:function(t){for(var e=[],n=0;n<t.length;n++){var r=this.chooseLanguage(t[n]);e.push(!1!==r?r.stemWord(t[n]):t[n])}return e}},{key:"chooseLanguage",value:function(t){return t[0]>="a"&&t[0]<="z"?this.en:t[0]>="а"&&t[0]<="я"&&this.rus}}]),t}(),w=["а","вдобавок","имен","такж","то","благодар","том","что","благ","буд","будт","в","результат","чег","тог","связ","с","тем","сил","случа","если","врем","как","ввид","вопрек","врод","вследств","да","еще","и","но","даб","даж","дар","для","чтоб","же","едва","лиш","ежел","бы","не","зат","зач","все","знач","поэт","прит","все-так","следовательн","тогд","ибо","из-за","или","каб","скор","словн","тольк","так","как-то","когд","кол","к","кром","ли","либ","межд","нежел","стольк","скольк","невзир","на","независим","от","несмотр","ни","однак","особен","оттог","отчег","перед","по","мер","причин","подобн","пок","покамест","покуд","посл","поскольк","пот","поч","прежд","чем","при","всем","услов","прич","пуска","пуст","рад","раз","раньш","тех","пор","бол","есть","тож","чут","точн","хот","я","он","этот","они","мы","ве","котор","она","сво","вы","ты","его","себ","ее","вот","друг","наш","сам","мо","кто","там","их","ничт","кажд","зде","что-то","всегд","ваш","никт","никогд","никак","некотор","тво","куд","кто-то","се","туд","как-нибуд","всег","откуд","сюд","стол","где-то","что-нибуд","поч-то","нек","когд-то","отсюд","че","нечт","кто-нибуд","вон","оттуд","как-либ","куд-то","никуд","таков","ко","некогд","нигд","ко-что","когд-нибуд","че-то","где-нибуд","так-то","что-либ","всюд","откуд-то","ничут","куд-нибуд","скол","тут-то","этак","тот-то","ко-как","ко-кто","зач-то","ко-где","кто-либ","нект","отчег-то","каков","эдак","нибуд","тогд-то","чег-то","когд-либ","отовсюд","нич","досел","оны","ниоткуд","эки","че-нибуд","сям","ник","дела","мног","может","быт","долж","вне","конец","сказа","видел","сейчас","из","немн","тот","те","во","имеет","её","оно","за","подойд","мог","имет","имел","был","до","явля","иди","через","под","над","очен","пут","хорош","где","кем","хотел","видет","вопрос","данн","кардинальн","называ","непривычн","нескольк","полност","это","нег","б","г","д","е","ж","з","й","л","м","н","о","п","р","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],k=["about","abov","after","again","all","also","am","an","and","anoth","ani","ar","as","at","be","becaus","been","befor","be","below","between","both","but","by","cam","can","cannot","com","could","did","do","doe","do","dur","each","few","for","from","further","get","got","has","had","he","hav","her","her","him","himself","his","how","if","in","into","is","it","it","itself","lik","mak","mani","me","might","mor","most","much","must","my","myself","never","now","of","on","onli","or","other","our","our","ourselv","out","over","own","said","sam","see","should","sinc","so","som","still","such","tak","than","that","the","their","their","them","themselv","then","ther","thes","they","this","thos","through","to","too","under","until","up","veri","was","way","we","well","wer","what","wher","when","which","whil","who","whom","with","would","whi","you","your","your","yourself","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var j=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&x(t.prototype,e),n&&x(t,n)}(t,null,[{key:"countDescriptors",value:function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=e.hasOwnProperty(t[n])?e[t[n]]+1:1;return e}},{key:"cleanDescriptors",value:function(t){for(var e in t)-1!==this.chooseLanguage(e).indexOf(e)&&delete t[e]}},{key:"chooseLanguage",value:function(t){return t[0]>="a"&&t[0]<="z"?k:w}},{key:"compressDescriptors",value:function(t){for(var e=[],n=Object.keys(t),r=Object.values(t),i=0;i<Object.keys(t).length;i++)e.push([n[i],r[i]]);e=e.qsort(function(t,e){return t[1]>e[1]?1:t[1]===e[1]&&t[0]>e[0]?1:void 0}),t={};for(var o=0;o<e.length&&o<20;o++)t[e[o][0]]=e[o][1];return t}},{key:"concatDescriptors",value:function(t){var e=JSON.parse(localStorage.getItem("allDescriptors")),n=Object.keys(t),r=Object.values(t);if(e){for(var i=0;i<n.length;i++)e.hasOwnProperty(n[i])?e[n[i]]+=r[i]:e[n[i]]=r[i];localStorage.setItem("docCount",+localStorage.getItem("docCount")+1),localStorage.setItem("allDescriptors",JSON.stringify(e))}else localStorage.setItem("docCount",1),localStorage.setItem("allDescriptors",JSON.stringify(t))}},{key:"getDescriptors",value:function(t){var e=this.countDescriptors(t);return this.cleanDescriptors(e),this.compressDescriptors(e)}}]),t}(),O=new i,A=new S;onmessage=function(t){try{"break"===t.data.action?postMessage({action:"break",result:O.breakText(t.data.text)}):"stem"===t.data.action?postMessage({action:"stem",result:A.stemWords(t.data.words)}):"descriptors"===t.data.action&&postMessage({action:t.data.action,result:j.getDescriptors(t.data.words)})}catch(t){postMessage({action:"error",error:t.stack})}}}]);',n.p+"worker.bundle.js")}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}String.prototype.inString=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("object"!==n(e))throw new Error("Argument is not an array");return e.find(function(e){return e===t.toString()})},String.prototype.in=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("object"!==n(e))throw new Error("Argument is not an array");return e.find(function(e){return e===t.charCodeAt(r)})},String.prototype.split=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=[],r="",i=0;i<this.length;i++){if(n.length===e)return n;""===t?n.push(this[i]):this[i]!==t?r+=this[i]:(n.push(r),r="")}return""!==r.trim()&&n.push(r),n},String.prototype.reverseStr=function(){for(var t="",e=this.length-1;e>=0;e--)t+=this[e];return t},String.prototype.multipleSpaces=function(){for(var t="",e=0;e<this.length;e++)this.in([32,160,65279],e)&&this.in([32,160,65279],e+1)||(t+=this[e]);return t},String.prototype.hyphenSpaces=function(){for(var t="",e=0;e<this.length;e++)this.in([32,160,65279],e)&&(this.in([45,8208],e-1)||this.in([45,8208],e+1))||(t+=this[e]);return t}},function(t,e){Array.prototype.swap=function(t,e){var n=this[e];this[e]=this[t],this[t]=n},Array.prototype.isort=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-1,r=e+1;r<=n;r++)for(var i=r;i>0&&t(this[i],this[i-1]);i--)this.swap(i-1,i);return this},Array.prototype.qsort=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-1;if(void 0===t&&(t=function(t,e){return t<e?1:0}),"function"!=typeof t)throw new Error("Argument compareFn must be a function");if(n-e<=32)return this.isort(t,e,n);for(var r=e,i=n,o=this[Math.floor(e+Math.random()*(n+1-e))];r<=i;){for(;t(this[r],o);)r++;for(;t(o,this[i]);)i--;r<=i&&this.swap(r++,i--)}return e<i&&this.qsort(t,e,i),n>r&&this.qsort(t,r,n),this}},function(t,e,n){"use strict";var r=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(r.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(1),n(2);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,null,[{key:"renderSteps",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.map(function(t,r){e[r]?t.classList.add("animate"):t.classList.remove("animate"),n[r]?t.classList.add("active"):t.classList.remove("active")})}},{key:"loader",value:function(t){document.querySelector(".lds-ellipsis").style.opacity=t?"1":"0"}},{key:"createElement",value:function(t,e,n){var r;return r=document.createElement(t),e&&(r.className=e),n&&(r.innerHTML=n),r}},{key:"createLine",value:function(t,e,n){var r,i;return r=this.createElement("div","line"),i=this.createElement("div","number",t+1),r.appendChild(i),i=this.createElement("div","word",e),r.appendChild(i),n&&(i=this.createElement("div","word",n),r.appendChild(i)),r}},{key:"print",value:function(t,e){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.length?(t.innerHTML="",e.map(function(e,o){n=r.createLine(o,e,i[o]),t.appendChild(n)})):(t.innerHTML="",t.appendChild(this.createLine(0,"","")))}},{key:"printWeights",value:function(t,e,n){t.innerHTML="";for(var r=0;r<n.length;r++)t.appendChild(this.createElement("div","weight",e[r]+": "+Math.round(100*n[r])/100))}},{key:"printDocuments",value:function(t,e){t.innerHTML="";for(var n=Object.keys(e),r=Object.values(e),i=0,o=0;o<n.length;o++)if(0!==r[o]){i++;var s=this.createElement("div","document"),u=this.createElement("div","num",i);s.appendChild(u),u=this.createElement("div","title",n[o]+"..."),s.appendChild(u),u=this.createElement("div","docinfo","Релевантность: ".concat(r[o],"%")),s.appendChild(u),t.appendChild(s)}return i}}]),t}();function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,null,[{key:"encodeBase64",value:function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))}},{key:"decodeBase64",value:function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}}]),t}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.goodSymbol=function(t){return e.goodSymbols.find(function(e){return t>=e[0]&&t<=e[1]})},this.hyphen=function(t,n){return e.goodSymbol(t.charCodeAt(n-1))&&e.goodSymbol(t.charCodeAt(n+1))},this.irrationalNumber=function(t,e){return Number.isInteger(Number.parseInt(t[e-1]))&&Number.isInteger(Number.parseInt(t[e+1]))},this.goodSymbols=[[48,57],[97,122],[1072,1103],[1105,1105]]}return function(t,e,n){e&&u(t.prototype,e),n&&u(t,n)}(t,[{key:"breakText",value:function(t){t=t.toLowerCase();for(var e=[],n="",r=0;r<t.length;r++)this.goodSymbol(t.charCodeAt(r))||t.in([45,8208],r)&&this.hyphen(t,r)||t.in([44],r)&&this.irrationalNumber(t,r)?n+=t[r]:""!==n.trim()&&(e.push(n),n="");return""!==n.trim()&&e.push(n),e}}]),t}();function l(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vowel=["a","e","i","o","u","y"],this.double=["bb","dd","ff","gg","mm","nn","pp","rr","tt"],this.li=["c","d","e","g","h","k","m","n","r","t"]}return function(t,e,n){e&&c(t.prototype,e),n&&c(t,n)}(t,[{key:"getR1",value:function(t){for(var e=0;e<t.length-1;){if(t[e].inString(this.vowel)&&!t[e+1].inString(this.vowel))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}},{key:"getR2",value:function(t){return this.getR1(t)}},{key:"stemWord",value:function(t){return t.length>2&&(t=this.removeInitialApostroph(t),t=this.setY(t),t=this.preparatoryStep(t),t=this.firstStepA(t),t=this.firstStepB(t),t=this.firstStepC(t),t=this.secondStep(t),t=this.thirdStep(t),t=this.fourthStep(t),t=this.fifthStep(t)),t.toLowerCase()}},{key:"removeInitialApostroph",value:function(t){return t[0].in([39,8217])?t.slice(1):t}},{key:"setY",value:function(t){"y"===(t=t.split(""))[0]&&(t[0]="Y");for(var e=1;e<t.length;e++)"y"===t[e]&&t[e-1].inString(this.vowel)&&(t[e]="Y");return t.join("")}},{key:"replaceMap",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.length,0);n<e.length;n++)for(var r=0;r<e[n].suffixes.length;r++)if(t.slice(t.length-e[n].suffixes[r].length)===e[n].suffixes[r]){var i=e[n].f(e[n].suffixes[r]);if(!1===i)continue;return i}return t}},{key:"preparatoryStep",value:function(t){var e=t.length,n={0:{suffixes:["'s'","'s","'"],f:function(t){return n.delete(t)}},delete:function(n){return t.slice(0,e-n.length)},length:1};return this.replaceMap(t,n)}},{key:"firstStepA",value:function(t){var e=this,n=t.length,r={0:{suffixes:["sses"],f:function(){return t.slice(0,n-4)+"ss"}},1:{suffixes:["ied","ies"],f:function(){return n-3>1?t.slice(0,n-3)+"i":t.slice(0,n-3)+"ie"}},2:{suffixes:["us","ss"],f:function(){return t}},3:{suffixes:["s"],f:function(){for(var r=2;r<t.length;r++)if(void 0!==t[n-r-1]&&t[n-r-1].inString(e.vowel))return t.slice(0,n-1);return t}},length:4};return this.replaceMap(t,r)}},{key:"firstStepB",value:function(t){var e=this,n=this.getR1(t),r=t.length,i={0:{suffixes:["eedly"],f:function(t){return i.eedly(t)}},1:{suffixes:["ingly","edly"],f:function(t){return i.ingly(t)}},2:{suffixes:["eed"],f:function(t){return i.eedly(t)}},3:{suffixes:["ing","ed"],f:function(e){var n=i.ingly(e);return!1===n?t:n}},eedly:function(t){return n[1].slice(n[1].length-t.length)===t&&n[0]+n[1].slice(0,n[1].length-t.length)+"ee"},ingly:function(n){for(var i=!1,o=0;o<r-n.length;o++)if(t[o].inString(e.vowel)){t=t.slice(0,r-n.length),r=t.length,i=!0;break}return!!i&&(t.slice(r-2).inString(["at","bl","iz"])?t+"e":t.slice(r-2).inString(e.double)?t.slice(0,r-1):e.isShort(t)?t+"e":t)},length:4};return this.replaceMap(t,i)}},{key:"firstStepC",value:function(t){t=t.split("");for(var e=0;e<t.length;e++)t[e].inString(["y","Y"])&&void 0!==t[e-1]&&!t[e-1].inString(this.vowel)&&e-1>0&&(t[e]="i");return t.join("")}},{key:"secondStep",value:function(t){var e=this,n=this.getR1(t),r=(t=n[1]).length,i={0:{suffixes:["ousness","iveness","fulness"],f:function(e){return t.slice(0,r-4)}},1:{suffixes:["ational","ization"],f:function(e){return t.slice(0,r-5)+"e"}},2:{suffixes:["tional","lessli"],f:function(e){return t.slice(0,r-2)}},3:{suffixes:["biliti"],f:function(e){return t.slice(0,r-5)+"e"}},4:{suffixes:["entli","ousli","fulli"],f:function(e){return t.slice(0,r-2)}},5:{suffixes:["ation","iviti"],f:function(e){return t.slice(0,r-3)+"e"}},6:{suffixes:["alism"],f:function(e){return t.slice(0,r-3)}},7:{suffixes:["enci","anci","abli"],f:function(e){return t.slice(0,r-1)+"e"}},8:{suffixes:["izer"],f:function(e){return t.slice(0,r-1)}},9:{suffixes:["ator"],f:function(e){return t.slice(0,r-2)+"e"}},10:{suffixes:["alli"],f:function(e){return t.slice(0,r-2)}},11:{suffixes:["bli"],f:function(e){return t.slice(0,r-1)+"e"}},12:{suffixes:["ogi"],f:function(e){return"l"===t[r-4]&&t.slice(0,r-1)}},13:{suffixes:["li"],f:function(n){return void 0!==t[r-3]&&t[r-3].inString(e.li)?t.slice(0,r-2):t}},length:14};return n[0]+this.replaceMap(n[1],i)}},{key:"thirdStep",value:function(t){var e=this,n=this.getR1(t),r=(t=n[1]).length,i={0:{suffixes:["ational"],f:function(e){return t.slice(0,r-5)+"e"}},1:{suffixes:["tional"],f:function(e){return t.slice(0,r-2)}},2:{suffixes:["alize","icate","iciti"],f:function(e){return t.slice(0,r-3)}},3:{suffixes:["ative"],f:function(n){var i=e.getR2(t);return i[1].slice(i[1].length-5)===n&&t.slice(0,r-5)}},4:{suffixes:["ical"],f:function(e){return t.slice(0,r-2)}},5:{suffixes:["ness","ful"],f:function(e){return t.slice(0,r-e.length)}},length:6};return n[0]+this.replaceMap(t,i)}},{key:"fourthStep",value:function(t){var e=this.getR1(t),n=this.getR2(e[1]),r=(t=n[1]).length,i={0:{suffixes:["ement","ance","ence","able","ible","ment","ant","ent","ism","ate","iti","ous","ive","ize"],f:function(e){return t.slice(0,r-e.length)}},1:{suffixes:["ion"],f:function(e){return!(void 0===t[r-4]||!t[r-4].inString(["s","t"]))&&t.slice(0,r-3)}},2:{suffixes:["al","er","ic"],f:function(e){return t.slice(0,r-2)}},length:3};return e[0]+n[0]+this.replaceMap(t,i)}},{key:"fifthStep",value:function(t){var e=this,n=this.getR1(t),r=(t=n[1]).length,i={0:{suffixes:["e"],f:function(n){var i=e.getR2(t);return("e"===i[1][i[1].length-1]||!e.isShortSyllable(t.slice(r-4,r-1)))&&t.slice(0,r-1)}},1:{suffixes:["l"],f:function(n){var i=e.getR2(t);return"l"===i[1][i[1].length-1]?t.slice(0,r-1):t}},length:2};return n[0]+this.replaceMap(t,i)}},{key:"isShortSyllable",value:function(t){return!(3!==t.length||t[0].inString(this.vowel)||!t[1].inString(this.vowel)||t[2].inString(l(this.vowel).concat(["w","x","Y"])))||!(2!==t.length||!t[0].inString(this.vowel)||t[1].inString(this.vowel))}},{key:"isShort",value:function(t){t.length;return""===this.getR1(t)[1]&&this.isShortSyllable(t.substr(-3))}}]),t}(),h=[["вшись","вши","в"],["ывшись","ившись","ывши","ивши","ив","ыв"],[6,5,4,3,2,1]],d=[["его","ого","ему","ому","ими","ыми","ее","ие","ые","ое","ей","ий","ый","ой","ем","им","ым","ом","их","ых","ую","юю","ая","яя","ою","ею"],[3,2]],g=[["ем","нн","вш","ющ","щ"],["ивш","ывш","ующ"],[3,2,1]],p=[["ся","сь"],[2]],v=[["ете","йте","ешь","нно","ла","на","ли","ем","ло","но","ет","ют","ны","ть","н","й","л"],["ейте","уйте","ует","уют","ило","ыло","ено","ила","ыла","ена","ите","или","ены","ить","ыть","ишь","ыли","ей","уй","ил","ыл","им","ым","ен","ят","ит","ыт","ую","ю"],[4,3,2,1]],y=[["иями","ями","ами","ией","иях","иям","ием","ев","ов","ие","ье","еи","ии","ей","ой","ий","ям","ем","ам","ом","ах","ях","ию","ью","ю","ия","ья","ю","и","о","у","ы","ь","й","е","а","я"],[4,3,2,1]],m=[["ейше","ейш"],[4,3]],b=[["ость","ост"],[4,3]];function S(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function w(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var k=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vowelCodes=["а","е","ё","и","о","у","ы","э","ю","я"]}return function(t,e,n){e&&w(t.prototype,e),n&&w(t,n)}(t,[{key:"getRV",value:function(t){for(var e=0;e<t.length-1;){if(!t[e].inString(S(this.vowelCodes).concat(["ь","ъ"]))&&t[e+1].inString(this.vowelCodes))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}},{key:"getR1",value:function(t){for(var e=0;e<t.length-1;){if(t[e].inString(this.vowelCodes)&&!t[e+1].inString(S(this.vowelCodes).concat(["ь","ъ"])))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}},{key:"getR2",value:function(t){return this.getR1(t)}},{key:"stemWord",value:function(t){var e,n,r,i,o,s,u;if(t.length<=2)return t;var a=[];1===(t=t.split("-")).length&&(t=t[0].split(String.fromCharCode(8208)));for(var l=0;l<t.length;l++)if(e=this.getRV(t[l])[0],!1!==(i=this.firstStep(t[l]))){o=this.secondStep(i),n=this.getR1(e+o),r=this.getR2(n[1]),s=this.thirdStep(r[1]);var c=this.getRV(n[0]+r[0]+s);u=this.fourthStep(c[1]),a.push(c[0]+u)}else a.push(t[l]);return t.length>=2?a.join("-"):a[0]}},{key:"findEnding",value:function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e,i=[],o=0,s=3===t.length?t[2]:t[1],u=0;u<s.length;u++)if(e.length>=s[u]&&(o=e.length-s[u],r=e.slice(o),i=3===t.length?e.in([1072,1103],o-1)||void 0===e[o-1]&&n?t[0]:t[1]:t[0],r.inString(i)))return this.unDoubleN(e.slice(0,e.length-r.length));return!1}},{key:"firstStep",value:function(t){var e,n,r=!1,i=this.getRV(t)[0],o=this.getRV(t)[1];return!1!==(n=this.findEnding(h,t))?this.getRV(n)[1]:""!==o&&(!1!==(n=this.findEnding(p,o))&&(r=!0,o=this.unDoubleN(n)),!1!==(n=this.findEnding(d,o))?!1!==(e=this.findEnding(g,n,i[i.length-1].inString(["а","я"])))?e:n:!1!==(n=this.findEnding(v,o,i[i.length-1].inString(["а","я"])))?n:r||!1===(n=this.findEnding(y,o))?o:n)}},{key:"secondStep",value:function(t){return"и"===t[t.length-1]?t.slice(0,t.length-1):t}},{key:"thirdStep",value:function(t){if(t.length>=3){var e=this.findEnding(b,t);return!1!==e?e:t}return t}},{key:"fourthStep",value:function(t){var e;return(e=this.unDoubleN(t))!==t?e:!1!==(e=this.findEnding(m,t))?this.unDoubleN(e):"ь"===t[t.length-1]?t.slice(0,t.length-1):t}},{key:"unDoubleN",value:function(t){return"н"===t[t.length-1]&&"н"===t[t.length-2]?t.slice(0,t.length-1):t}}]),t}();function x(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.en=new f,this.rus=new k}return function(t,e,n){e&&x(t.prototype,e),n&&x(t,n)}(t,[{key:"stemWords",value:function(t){for(var e=[],n=0;n<t.length;n++){var r=this.chooseLanguage(t[n]);e.push(!1!==r?r.stemWord(t[n]):t[n])}return e}},{key:"chooseLanguage",value:function(t){return t[0]>="a"&&t[0]<="z"?this.en:t[0]>="а"&&t[0]<="я"&&this.rus}}]),t}(),j=function(t,e){return t>e?1:0},L=function(t,e){if(t[1]>e[1])return 1};function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var C=new a,E=new O,A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&B(t.prototype,e),n&&B(t,n)}(t,null,[{key:"handleRequest",value:function(t){var e=C.breakText(t.multipleSpaces().hyphenSpaces());return E.stemWords(e)}},{key:"calcWeights",value:function(t){var e=0,n=0,r=0,i=[],o=JSON.parse(localStorage.getItem("allDescriptors"));if(!o)return!1;for(var s=0;s<t.length;s++)o.hasOwnProperty(t[s])&&(n++,e+=o[t[s]]);if(n===t.length)for(var u=0;u<t.length;u++)i.push(o[t[u]]/e);else if(n>0&&n<t.length){e+=(r=e/n)*(t.length-n);for(var a=0;a<t.length;a++)i.push(o.hasOwnProperty(t[a])?o[t[a]]/e:r/e)}else for(var l=0;l<t.length;l++)i.push(1/t.length);return i}},{key:"calculateR",value:function(t,e){for(var n,r={},i=[],o=0;o<localStorage.length;o++){var u=0;try{if("document"===(n=JSON.parse(localStorage.getItem(localStorage.key(o)))).type){0;for(var a=0;a<t.length;a++){var l=n.descriptors.indexOf(t[a]);-1!==l&&(l<4?u+=1*e[a]:l<10?u+=.5*e[a]:l<20&&(u+=1/3*e[a]))}u=Math.round(u/t.length*100),i.push([s.decodeBase64(localStorage.key(o)),u])}}finally{continue}}i.qsort(L);for(var c=0;c<i.length;c++)r[i[c][0]]=i[c][1];return r}}]),t}();function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store=e,this.search=document.querySelector(".search"),this.searchButton=document.querySelector(".searchbutton"),this.searchBox=document.querySelector(".searchbox"),this.weightBox=document.querySelector(".weights"),this.searchInput=document.querySelector(".searchinput"),this.documentsBox=document.querySelector(".documents"),this.searchButtonHandler=this.searchButtonHandler.bind(this),this.searchInputHandler=this.searchInputHandler.bind(this)}return function(t,e,n){e&&R(t.prototype,e),n&&R(t,n)}(t,[{key:"searchButtonHandler",value:function(t){this.state.isSearchBoxOpen?(this.search.style.opacity=0,this.search.style.pointerEvents="none",this.searchBox.classList.remove("animation"),this.searchButton.classList.remove("close"),this.searchInput.blur()):(this.search.style.opacity=1,this.search.style.pointerEvents="unset",this.searchBox.classList.add("animation"),this.searchButton.classList.add("close"),this.searchInput.focus()),this.dispatch({isSearchBoxOpen:!this.state.isSearchBoxOpen})}},{key:"searchInputHandler",value:function(t){var e,n,r=[];""!==t.target.value.trim()?(this.search.style.background="rgba(255,255,255, 0.95)",this.documentsBox.style.paddingLeft="15px",this.docCount?(e=A.handleRequest(this.searchInput.value),n=A.calcWeights(e),r=A.calculateR(e,n),i.printWeights(this.weightBox,e,n),this.weightBox.classList.add("animation"),i.printDocuments(this.documentsBox,r)||(this.documentsBox.textContent="По вашему запросу ничего не найдено",this.documentsBox.style.paddingLeft="20px")):(this.documentsBox.textContent="Проиндексируйте хотя бы один документ",this.documentsBox.style.paddingLeft="20px"),this.documentsBox.style.animation="0.15s ease-in-out 0.08s fadeIn both"):(this.documentsBox.style.animation="unset",this.weightBox.innerHTML="",this.weightBox.classList.remove("animation"),this.documentsBox.innerHTML="",this.search.style.background="rgba(0, 0, 0, 0.2)")}},{key:"state",get:function(){return this.store.state}},{key:"dispatch",get:function(){return this.store.dispatch}},{key:"docCount",get:function(){return+localStorage.getItem("docCount")}}]),t}();function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var M=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&H(t.prototype,e),n&&H(t,n)}(t,null,[{key:"countNGrams",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n={};return t.map(function(t){1===(t=t.split("-")).length&&(t=t[0].split(String.fromCharCode(8208)));for(var r=0;r<t.length;r++)if(t[r].length>=e)for(var i=0;i<t[r].length-e+1;i++){var o=t[r].slice(i,i+e);n[o]=n.hasOwnProperty(o)?n[o]+1:1}}),n}}]),t}();function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store=e,this.output=document.querySelector(".linesbox"),this.nGramButton=document.querySelector(".ngram"),this.nGramButtonHandler=this.nGramButtonHandler.bind(this)}return function(t,e,n){e&&P(t.prototype,e),n&&P(t,n)}(t,[{key:"nGramButtonHandler",value:function(t){if(this.state.wordList.length){var e=M.countNGrams(this.state.wordList,3);this.dispatch({nGramKeys:Object.keys(e),nGramValues:Object.values(e),currentList:["nGramKeys","nGramValues"]}),i.print(this.output,this.state.nGramKeys,this.state.nGramValues)}}},{key:"state",get:function(){return this.store.state}},{key:"dispatch",get:function(){return this.store.dispatch}}]),t}();function q(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function D(t){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var W=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store=e,this.output=document.querySelector(".linesbox"),this.ascSortButton=document.querySelector("div[data-type=asc]"),this.descSortButton=document.querySelector("div[data-type=desc]"),this.directionButton=document.querySelector(".direction"),this.sortHandler=this.sortHandler.bind(this),this.getSortedArray=this.getSortedArray.bind(this),this.directionHandler=this.directionHandler.bind(this)}return function(t,e,n){e&&N(t.prototype,e),n&&N(t,n)}(t,[{key:"getSortedArray",value:function(t){var e,n,r=this.state,i=r.currentList,o=r.direction,s=[],u=[],a=[];if(2===i.length){e=t.hasOwnProperty("side")?t.side:1,n=function(t,n){return t[e]<n[e]?1:0},t.hasOwnProperty("order")&&"desc"===t.order&&(n=function(t,n){return t[e]>n[e]?1:0});for(var l=0;l<this.state[i[0]].length;l++){var c=o?this.state[i[0]][l]:this.state[i[0]][l].toString().reverseStr(),f=o?this.state[i[1]][l]:this.state[i[1]][l].toString().reverseStr();s.push([c,f])}return s.qsort(n).map(function(t){u.push(o?t[0]:t[0].toString().reverseStr()),a.push(o?t[1]:t[1].toString().reverseStr())}),[u,a]}return t.hasOwnProperty("order")&&(n="desc"===t.order?j:void 0),s=this.state[i[0]].slice(),[s=o?s.qsort(n):(s=s.map(function(t){return t.toString().reverseStr()})).qsort(n).map(function(t){return t.toString().reverseStr()})]}},{key:"sortHandler",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.state.currentList;if("object"!==D(n)||!n.length)return!1;var r=this.getSortedArray(e);i.print.apply(i,[this.output].concat(q(r)))}},{key:"directionHandler",value:function(t){this.directionButton.style.transform="rotateZ(".concat(this.state.direction?180:0,"deg)"),this.dispatch({direction:!this.state.direction})}},{key:"state",get:function(){return this.store.state}},{key:"dispatch",get:function(){return this.store.dispatch}}]),t}();function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var V=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store=e,this.input=document.querySelector("textarea"),this.fileLoader=document.querySelector("#fileloader"),this.reader=new FileReader,this.reader.addEventListener("loadend",function(t){n.input.value=t.target.result,n.dispatch({isInputChanged:!0})}),this.fileLoaderHandler=this.fileLoaderHandler.bind(this)}return function(t,e,n){e&&z(t.prototype,e),n&&z(t,n)}(t,[{key:"fileLoaderHandler",value:function(t){this.reader.readAsText(t.target.files[0])}},{key:"state",get:function(){return this.store.state}},{key:"dispatch",get:function(){return this.store.dispatch}}]),t}(),G=["а","вдобавок","имен","такж","то","благодар","том","что","благ","буд","будт","в","результат","чег","тог","связ","с","тем","сил","случа","если","врем","как","ввид","вопрек","врод","вследств","да","еще","и","но","даб","даж","дар","для","чтоб","же","едва","лиш","ежел","бы","не","зат","зач","все","знач","поэт","прит","все-так","следовательн","тогд","ибо","из-за","или","каб","скор","словн","тольк","так","как-то","когд","кол","к","кром","ли","либ","межд","нежел","стольк","скольк","невзир","на","независим","от","несмотр","ни","однак","особен","оттог","отчег","перед","по","мер","причин","подобн","пок","покамест","покуд","посл","поскольк","пот","поч","прежд","чем","при","всем","услов","прич","пуска","пуст","рад","раз","раньш","тех","пор","бол","есть","тож","чут","точн","хот","я","он","этот","они","мы","ве","котор","она","сво","вы","ты","его","себ","ее","вот","друг","наш","сам","мо","кто","там","их","ничт","кажд","зде","что-то","всегд","ваш","никт","никогд","никак","некотор","тво","куд","кто-то","се","туд","как-нибуд","всег","откуд","сюд","стол","где-то","что-нибуд","поч-то","нек","когд-то","отсюд","че","нечт","кто-нибуд","вон","оттуд","как-либ","куд-то","никуд","таков","ко","некогд","нигд","ко-что","когд-нибуд","че-то","где-нибуд","так-то","что-либ","всюд","откуд-то","ничут","куд-нибуд","скол","тут-то","этак","тот-то","ко-как","ко-кто","зач-то","ко-где","кто-либ","нект","отчег-то","каков","эдак","нибуд","тогд-то","чег-то","когд-либ","отовсюд","нич","досел","оны","ниоткуд","эки","че-нибуд","сям","ник","дела","мног","может","быт","долж","вне","конец","сказа","видел","сейчас","из","немн","тот","те","во","имеет","её","оно","за","подойд","мог","имет","имел","был","до","явля","иди","через","под","над","очен","пут","хорош","где","кем","хотел","видет","вопрос","данн","кардинальн","называ","непривычн","нескольк","полност","это","нег","б","г","д","е","ж","з","й","л","м","н","о","п","р","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],Y=["about","abov","after","again","all","also","am","an","and","anoth","ani","ar","as","at","be","becaus","been","befor","be","below","between","both","but","by","cam","can","cannot","com","could","did","do","doe","do","dur","each","few","for","from","further","get","got","has","had","he","hav","her","her","him","himself","his","how","if","in","into","is","it","it","itself","lik","mak","mani","me","might","mor","most","much","must","my","myself","never","now","of","on","onli","or","other","our","our","ourselv","out","over","own","said","sam","see","should","sinc","so","som","still","such","tak","than","that","the","their","their","them","themselv","then","ther","thes","they","this","thos","through","to","too","under","until","up","veri","was","way","we","well","wer","what","wher","when","which","whil","who","whom","with","would","whi","you","your","your","yourself","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var J=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&_(t.prototype,e),n&&_(t,n)}(t,null,[{key:"countDescriptors",value:function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=e.hasOwnProperty(t[n])?e[t[n]]+1:1;return e}},{key:"cleanDescriptors",value:function(t){for(var e in t)-1!==this.chooseLanguage(e).indexOf(e)&&delete t[e]}},{key:"chooseLanguage",value:function(t){return t[0]>="a"&&t[0]<="z"?Y:G}},{key:"compressDescriptors",value:function(t){for(var e=[],n=Object.keys(t),r=Object.values(t),i=0;i<Object.keys(t).length;i++)e.push([n[i],r[i]]);e=e.qsort(function(t,e){return t[1]>e[1]?1:t[1]===e[1]&&t[0]>e[0]?1:void 0}),t={};for(var o=0;o<e.length&&o<20;o++)t[e[o][0]]=e[o][1];return t}},{key:"concatDescriptors",value:function(t){var e=JSON.parse(localStorage.getItem("allDescriptors")),n=Object.keys(t),r=Object.values(t);if(e){for(var i=0;i<n.length;i++)e.hasOwnProperty(n[i])?e[n[i]]+=r[i]:e[n[i]]=r[i];localStorage.setItem("docCount",+localStorage.getItem("docCount")+1),localStorage.setItem("allDescriptors",JSON.stringify(e))}else localStorage.setItem("docCount",1),localStorage.setItem("allDescriptors",JSON.stringify(t))}},{key:"getDescriptors",value:function(t){var e=this.countDescriptors(t);return this.cleanDescriptors(e),this.compressDescriptors(e)}}]),t}(),K=n(0),U=n.n(K);function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Z=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store=e,this.input=document.querySelector("textarea"),this.output=document.querySelector(".linesbox"),this.worker=new U.a,this.breakWordButton=document.querySelector("a[data-type=breaktext]"),this.stemmingButton=document.querySelector("a[data-type=stemming]"),this.podButton=document.querySelector("a[data-type=pod]"),this.buttons=[this.breakWordButton,this.stemmingButton,this.podButton],this.workerHandler=this.workerHandler.bind(this),this.breakWordButtonHandler=this.breakWordButtonHandler.bind(this),this.stemmingButtonHandler=this.stemmingButtonHandler.bind(this),this.podButtonHandler=this.podButtonHandler.bind(this)}return function(t,e,n){e&&F(t.prototype,e),n&&F(t,n)}(t,[{key:"workerHandler",value:function(t){var e=t.data;if("break"===e.action)i.print(this.output,e.result),i.renderSteps(this.buttons,[!0,!0],[!0]),this.dispatch({wordList:e.result,isInputChanged:!1,stemmedList:[],currentList:["wordList"]});else if("stem"===e.action)i.print(this.output,this.state.wordList,e.result),i.renderSteps([this.stemmingButton,this.podButton],[!0,!0],[!0]),this.dispatch({stemmedList:e.result,currentList:["wordList","stemmedList"]});else if("descriptors"===e.action){var n=Object.keys(e.result),r=Object.values(e.result),o=s.encodeBase64(this.input.value.split(" ",7).join(" "));n.length&&!localStorage.getItem(o)&&(J.concatDescriptors(e.result),localStorage.setItem(o,JSON.stringify({descriptors:n,n:r,type:"document"}))),i.print(this.output,n,r),i.renderSteps([this.podButton],[!0],[!0]),this.dispatch({descriptorsKeys:n,descriptorsValues:r,currentList:["descriptorsKeys","descriptorsValues"]})}else console.error(t.data.error);i.loader(!1)}},{key:"breakWordButtonHandler",value:function(t){t.preventDefault();var e=this.state,n=e.isInputChanged,r=e.wordList;e.sortedList,e.currentList;if(!n)return this.dispatch({currentList:["wordList"]}),i.print(this.output,r),i.renderSteps(this.buttons,[!0,!0],[!0]),!1;i.loader(!0),this.worker.postMessage({action:"break",text:this.input.value.multipleSpaces().hyphenSpaces()})}},{key:"stemmingButtonHandler",value:function(t){t.preventDefault();var e=this.state,n=e.wordList,r=e.stemmedList;if(r.length)return this.dispatch({currentList:["wordList","stemmedList"]}),i.print(this.output,n,r),i.renderSteps([this.stemmingButton,this.podButton],[!0,!0],[!0]),!1;i.loader(!0),this.worker.postMessage({action:"stem",words:n.slice()})}},{key:"podButtonHandler",value:function(t){var e=this.state.stemmedList;t.preventDefault(),i.loader(!0),this.worker.postMessage({action:"descriptors",words:e.slice()})}},{key:"state",get:function(){return this.store.state}},{key:"dispatch",get:function(){return this.store.dispatch}}]),t}();function Q(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tt=new(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=e,this.dispatch=this.dispatch.bind(this)}return function(t,e,n){e&&X(t.prototype,e),n&&X(t,n)}(t,[{key:"dispatch",value:function(t){return this.state=Object.freeze(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){Q(t,e,n[e])})}return t}({},this.state,t)),console.info("App state: ",this.state),this.state}}]),t}())({isInputChanged:!0,isSearchBoxOpen:!1,direction:1,wordList:[],stemmedList:[],nGramKeys:[],nGramValues:[],descriptorsKeys:[],descriptorsValues:[],currentList:["wordList"]}),et=new I(tt),nt=new T(tt),rt=new W(tt),it=new V(tt),ot=new Z(tt),st=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.store=tt,this.input=document.querySelector("textarea"),this.createListeners()}return function(t,e,n){e&&$(t.prototype,e),n&&$(t,n)}(t,[{key:"createListeners",value:function(){var t=this;it.fileLoader.addEventListener("change",it.fileLoaderHandler),rt.ascSortButton.addEventListener("click",function(t){return rt.sortHandler(t)}),rt.descSortButton.addEventListener("click",function(t){return rt.sortHandler(t,{order:"desc"})}),rt.directionButton.addEventListener("click",rt.directionHandler),et.searchButton.addEventListener("click",et.searchButtonHandler),et.searchInput.addEventListener("change",et.searchInputHandler),nt.nGramButton.addEventListener("click",nt.nGramButtonHandler),ot.worker.addEventListener("message",ot.workerHandler),ot.breakWordButton.addEventListener("click",ot.breakWordButtonHandler),ot.stemmingButton.addEventListener("click",ot.stemmingButtonHandler),ot.podButton.addEventListener("click",ot.podButtonHandler),document.querySelector(".outputbox").addEventListener("click",function(t){"percent"===t.target.className&&(document.querySelector("main").style.gridTemplateColumns="".concat(100-t.target.dataset.percent,"% ").concat(t.target.dataset.percent,"%"),t.target.dataset.percent=125-t.target.dataset.percent)}),this.input.addEventListener("change",function(e){t.dispatch({isInputChanged:!0})})}},{key:"state",get:function(){return this.store.state}},{key:"dispatch",get:function(){return this.store.dispatch}}]),t}();n(4),n(5),new st}]);