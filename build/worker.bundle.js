!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}String.prototype.inString=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("object"!==e(n))throw new Error("Argument is not an array");return n.find(function(n){return n===t.toString()})},String.prototype.in=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("object"!==e(n))throw new Error("Argument is not an array");return n.find(function(n){return n===t.charCodeAt(r)})},String.prototype.split=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,e=[],r="",i=0;i<this.length;i++){if(e.length===n)return e;this[i]!==t?r+=this[i]:(e.push(r),r="")}return""!==r.trim()&&e.push(r),e},String.prototype.reverseStr=function(){return this.split("").reverse().join("")},String.prototype.multipleSpaces=function(){for(var t="",n=0;n<this.length;n++)this.in([32,160,65279],n)&&this.in([32,160,65279],n+1)||(t+=this[n]);return t},String.prototype.hyphenSpaces=function(){for(var t="",n=0;n<this.length;n++)this.in([32,160,65279],n)?45!==this.charCodeAt(n+1)&&45!==this.charCodeAt(n-1)&&(t+=this[n]):t+=this[n];return t},String.prototype.lineWrapping=function(){for(var t="",n=0;n<this.length;n++)this.in([10,13],n)?t+=" ":t+=this[n];return t}},function(t,n){Array.prototype.swap=function(t,n){var e=this[n];this[n]=this[t],this[t]=e},Array.prototype.isort=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-1,r=n+1;r<=e;r++)for(var i=r;i>0&&t(this[i],this[i-1]);i--)this.swap(i-1,i);return this},Array.prototype.qsort=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-1;if(void 0===t&&(t=function(t,n){return t<n?1:0}),"function"!=typeof t)throw new Error("Argument compareFn must be a function");if(e-n<=32)return this.isort(t,n,e);for(var r=n,i=e,o=this[Math.floor(n+Math.random()*(e+1-n))];r<=i;){for(;t(this[r],o);)r++;for(;t(o,this[i]);)i--;r<=i&&this.swap(r++,i--)}return n<i&&this.qsort(t,n,i),e>r&&this.qsort(t,r,e),this}},function(t,n,e){"use strict";e.r(n);e(0),e(1);function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){var n=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.goodSymbol=function(t){return n.goodSymbols.find(function(n){return t>=n[0]&&t<=n[1]})},this.hyphen=function(t,e){return n.goodSymbol(t.charCodeAt(e-1))&&n.goodSymbol(t.charCodeAt(e+1))},this.goodSymbols=[[48,57],[97,122],[1072,1103],[1105,1105]]}return function(t,n,e){n&&r(t.prototype,n),e&&r(t,e)}(t,[{key:"breakText",value:function(t){t=t.toLowerCase();for(var n=[],e="",r=0;r<t.length;r++)this.goodSymbol(t.charCodeAt(r))||45===t.charCodeAt(r)&&this.hyphen(t,r)?e+=t[r]:""!==e.trim()&&(n.push(e),e="");return""!==e.trim()&&n.push(e),n}}]),t}(),o=[["вшись","вши","в"],["ывшись","ившись","ывши","ивши","ив","ыв"],[6,5,4,3,2,1]],s=[["его","ого","ему","ому","ими","ыми","ее","ие","ые","ое","ей","ий","ый","ой","ем","им","ым","ом","их","ых","ую","юю","ая","яя","ою","ею"],[3,2]],u=[["ся","сь"],[2]],a=[["ете","йте","ешь","нно","ла","на","ли","ем","ло","но","ет","ют","ны","ть","н","й","л"],["ейте","уйте","ует","уют","ило","ыло","ено","ила","ыла","ена","ите","или","ены","ить","ыть","ишь","ыли","ей","уй","ил","ыл","им","ым","ен","ят","ит","ыт","ую","ю"],[4,3,2,1]],c=[["иями","ями","ами","ией","иях","иям","ием","ев","ов","ие","ье","еи","ии","ей","ой","ий","ям","ем","ам","ом","ах","ях","ию","ью","ю","ия","ья","ю","и","о","у","ы","ь","й","е","а","я"],[4,3,2,1]],f=[["ейше","ейш"],[4,3]],h=[["ость","ост"],[4,3]];function l(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.vowelCodes=[1072,1077,1105,1080,1086,1091,1099,1101,1102,1103],this.consonantCodes=[1073,1074,1075,1076,1078,1079,1081,1082,1083,1084,1085,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097]}return function(t,n,e){n&&l(t.prototype,n),e&&l(t,e)}(t,[{key:"getRV",value:function(t){for(var n=0,e=!1;n<t.length-1;)if(!t[n].in(this.consonantCodes)||e){if(e&&t[n+1].in(this.vowelCodes))return[t.slice(0,n+=2),t.slice(n)];n++}else e=!0;return[t,""]}},{key:"getR1",value:function(t){for(var n=0,e=!1;n<t.length-1;)if(!t[n].in(this.vowelCodes)||e){if(e&&t[n+1].in(this.consonantCodes))return[t.slice(0,n+=2),t.slice(n)];n++}else e=!0;return[t,""]}},{key:"getR2",value:function(t){for(var n=0,e=!1;n<t.length-1;)if(!t[n].in(this.vowelCodes)||e){if(e&&t[n+1].in(this.consonantCodes))return[t.slice(0,n+=2),t.slice(n)];n++}else e=!0;return[t,""]}},{key:"stemWords",value:function(t){for(var n=[],e=0;e<t.length;e++)n.push(this.stemWord(t[e]));return n}},{key:"stemWord",value:function(t){if(t.length<=2)return t;var n=[];t=t.split("-");for(var e=0;e<t.length;e++){var r,i,o,s,u,a,c=this.getRV(t[e])[0],f=void 0;!1!==(r=this.firstStep(t[e]))?(f=c+this.secondStep(r),o=this.getR1(f)[0],s=this.getR1(f)[1],u=this.getR2(s)[0],a=this.getR2(s)[1],f=u+this.thirdStep(a),i=this.fourthStep(f),n.push(o+i)):n.push(t[e])}return t.length>=2?n.join("-"):n[0]}},{key:"findEnding",value:function(t,n){var e="",r=[],i=0,o=t[1];3===t.length&&(o=t[2]);for(var s=0;s<o.length;s++)if(n.length>=o[s]&&(i=n.length-o[s],e=n.slice(i),r=3===t.length?"я"===n[i-1]||"а"===n[i-1]?t[0]:t[1]:t[0],e.inString(r))){if(n=n.slice(0,n.length-e.length),t===this.adjective){var u=this.findEnding(this.participle,n);!1!==u&&(n=u)}return n}return!1}},{key:"firstStep",value:function(t){var n,e,r,i,f,h=!1,l=this.getRV(t)[1];return!1!==(n=this.findEnding(o,t))?n:""!==l&&(!1!==(e=this.findEnding(u,l))&&(h=!0,l=e),0!=(r=this.findEnding(s,l))?r:!1!==(i=this.findEnding(a,l))?i:h||!1===(f=this.findEnding(c,l))?l:f)}},{key:"secondStep",value:function(t){return"и"===t[t.length-1]?t.slice(0,t.length-1):t}},{key:"thirdStep",value:function(t){if(t.length>=3){var n=this.findEnding(h,t);return 0!=n?n:t}return t}},{key:"fourthStep",value:function(t){var n;return"н"===t[t.length-1]&&"н"===t[t.length-2]?t.slice(0,t.length-1):!1!==(n=this.findEnding(f,t))?n:"ь"===t[t.length-1]?t.slice(0,t.length-1):t}}]),t}(),g=["дела","мног","может","быт","бол","сам","долж","друг","наш","вне","конец","сказа","такж","видел","мо","никогд","сейчас","из","на","тольк","или","немн","все","еще","так","зат","тот","их","там","этот","они","те","посл","как","во","он","имеет","её","зде","его","если","оно","за","подойд","мог","кажд","для","откуд","имет","имел","пот","был","до","явля","межд","но","от","иди","через","тож","под","над","очен","пут","мы","хорош","что","где","котор","пок","кто","кем","хотел","ты","тво","ве","видет","вопрос","данн","кардинальн","да","однак","же","называ","непривычн","нескольк","полност","когд","тем","лиш","едва","не","это","он","она","оно","они","нег","их","а","б","в","г","д","е","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function d(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,n,e){n&&d(t.prototype,n),e&&d(t,e)}(t,null,[{key:"countDescriptors",value:function(t){for(var n={},e=0;e<t.length;e++)n[t[e]]=n.hasOwnProperty(t[e])?n[t[e]]+1:1;return n}},{key:"cleanDescriptors",value:function(t){for(var n in t)-1!==g.indexOf(n)&&delete t[n]}},{key:"compressDescriptors",value:function(t){for(var n=[],e=Object.keys(t),r=Object.values(t),i=0;i<Object.keys(t).length;i++)n.push([e[i],r[i]]);n=n.qsort(function(t,n){return t[1]>n[1]?1:t[1]===n[1]&&t[0]>n[0]?1:void 0}),t={};for(var o=0;o<n.length&&o<20;o++)t[n[o][0]]=n[o][1];return t}},{key:"getDescriptors",value:function(t){var n=this.countDescriptors(t);return this.cleanDescriptors(n),this.compressDescriptors(n)}}]),t}(),y=new i,b=new p;onmessage=function(t){try{"break"===t.data.action?postMessage({action:"break",result:y.breakText(t.data.text)}):"stem"===t.data.action?postMessage({action:"stem",result:b.stemWords(t.data.words)}):"descriptors"===t.data.action&&postMessage({action:t.data.action,result:v.getDescriptors(t.data.words)})}catch(t){postMessage({action:"error",error:t.stack})}}}]);