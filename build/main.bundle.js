!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=6)}([function(t,e,i){t.exports=function(){return i(3)('!function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e){String.prototype.inString=function(t=[]){if("object"!=typeof t)throw new Error("Argument is not an array");return t.find(t=>t===this.toString())},String.prototype.in=function(t=[],e=0){if("object"!=typeof t)throw new Error("Argument is not an array");return t.find(t=>t===this.charCodeAt(e))},String.prototype.split=function(t="",e=-1){let i=[],s="";for(let r=0;r<this.length;r++){if(i.length===e)return i;""===t?i.push(this[r]):this[r]!==t?s+=this[r]:(i.push(s),s="")}return""!==s.trim()&&i.push(s),i},String.prototype.reverseStr=function(){let t="";for(let e=this.length-1;e>=0;e--)t+=this[e];return t},String.prototype.multipleSpaces=function(){let t="";for(let e=0;e<this.length;e++){if(this.in([32,160,65279],e)&&this.in([32,160,65279],e+1))continue;t+=this[e]}return t},String.prototype.hyphenSpaces=function(){let t="";for(let e=0;e<this.length;e++)this.in([32,160,65279],e)&&(this.in([45,8208],e-1)||this.in([45,8208],e+1))||(t+=this[e]);return t}},function(t,e){Array.prototype.swap=function(t,e){let i=this[e];this[e]=this[t],this[t]=i},Array.prototype.isort=function(t,e=0,i=this.length-1){for(let s=e+1;s<=i;s++)for(let e=s;e>0&&t(this[e],this[e-1]);e--)this.swap(e-1,e);return this},Array.prototype.qsort=function(t,e=0,i=this.length-1){if(void 0===t&&(t=((t,e)=>t<e?1:0)),"function"!=typeof t)throw new Error("Argument compareFn must be a function");if(i-e<=32)return this.isort(t,e,i);let s=e,r=i,n=this[Math.floor(e+Math.random()*(i+1-e))];for(;s<=r;){for(;t(this[s],n);)s++;for(;t(n,this[r]);)r--;s<=r&&this.swap(s++,r--)}return e<r&&this.qsort(t,e,r),i>s&&this.qsort(t,s,i),this}},function(t,e,i){"use strict";i.r(e);i(0),i(1);var s=class{constructor(){this.vowel=["a","e","i","o","u","y"],this.double=["bb","dd","ff","gg","mm","nn","pp","rr","tt"],this.li=["c","d","e","g","h","k","m","n","r","t"]}getR1(t){let e=0;for(;e<t.length-1;){if(t[e].inString(this.vowel)&&!t[e+1].inString(this.vowel))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}getR2(t){return this.getR1(t)}stemWord(t){return t.length>2&&(t=this.removeInitialApostroph(t),t=this.setY(t),t=this.preparatoryStep(t),t=this.firstStepA(t),t=this.firstStepB(t),t=this.firstStepC(t),t=this.secondStep(t),t=this.thirdStep(t),t=this.fourthStep(t),t=this.fifthStep(t)),t.toLowerCase()}removeInitialApostroph(t){return t[0].in([39,8217])?t.slice(1):t}setY(t){"y"===(t=t.split(""))[0]&&(t[0]="Y");for(let e=1;e<t.length;e++)"y"===t[e]&&t[e-1].inString(this.vowel)&&(t[e]="Y");return t.join("")}replaceMap(t,e={}){t.length;for(let i=0;i<e.length;i++)for(let s=0;s<e[i].suffixes.length;s++)if(t.slice(t.length-e[i].suffixes[s].length)===e[i].suffixes[s]){let t=e[i].f(e[i].suffixes[s]);if(!1===t)continue;return t}return t}preparatoryStep(t){let e=t.length,i={0:{suffixes:["\'s\'","\'s","\'"],f:t=>i.delete(t)},delete:i=>t.slice(0,e-i.length),length:1};return this.replaceMap(t,i)}firstStepA(t){let e=t.length,i={0:{suffixes:["sses"],f:()=>t.slice(0,e-4)+"ss"},1:{suffixes:["ied","ies"],f:()=>e-3>1?t.slice(0,e-3)+"i":t.slice(0,e-3)+"ie"},2:{suffixes:["us","ss"],f:()=>t},3:{suffixes:["s"],f:()=>{for(let i=2;i<t.length;i++)if(void 0!==t[e-i-1]&&t[e-i-1].inString(this.vowel))return t.slice(0,e-1);return t}},length:4};return this.replaceMap(t,i)}firstStepB(t){let e=this.getR1(t),i=t.length,s={0:{suffixes:["eedly"],f:t=>s.eedly(t)},1:{suffixes:["ingly","edly"],f:t=>s.ingly(t)},2:{suffixes:["eed"],f:t=>s.eedly(t)},3:{suffixes:["ing","ed"],f:e=>{let i=s.ingly(e);return!1===i?t:i}},eedly:t=>e[1].slice(e[1].length-t.length)===t&&e[0]+e[1].slice(0,e[1].length-t.length)+"ee",ingly:e=>{let s=!1;for(let r=0;r<i-e.length;r++)if(t[r].inString(this.vowel)){t=t.slice(0,i-e.length),i=t.length,s=!0;break}return!!s&&(t.slice(i-2).inString(["at","bl","iz"])?t+"e":t.slice(i-2).inString(this.double)?t.slice(0,i-1):this.isShort(t)?t+"e":t)},length:4};return this.replaceMap(t,s)}firstStepC(t){t=t.split("");for(let e=0;e<t.length;e++)t[e].inString(["y","Y"])&&void 0!==t[e-1]&&!t[e-1].inString(this.vowel)&&e-1>0&&(t[e]="i");return t.join("")}secondStep(t){let e=this.getR1(t),i=(t=e[1]).length,s={0:{suffixes:["ousness","iveness","fulness"],f:e=>t.slice(0,i-4)},1:{suffixes:["ational","ization"],f:e=>t.slice(0,i-5)+"e"},2:{suffixes:["tional","lessli"],f:e=>t.slice(0,i-2)},3:{suffixes:["biliti"],f:e=>t.slice(0,i-5)+"e"},4:{suffixes:["entli","ousli","fulli"],f:e=>t.slice(0,i-2)},5:{suffixes:["ation","iviti"],f:e=>t.slice(0,i-3)+"e"},6:{suffixes:["alism"],f:e=>t.slice(0,i-3)},7:{suffixes:["enci","anci","abli"],f:e=>t.slice(0,i-1)+"e"},8:{suffixes:["izer"],f:e=>t.slice(0,i-1)},9:{suffixes:["ator"],f:e=>t.slice(0,i-2)+"e"},10:{suffixes:["alli"],f:e=>t.slice(0,i-2)},11:{suffixes:["bli"],f:e=>t.slice(0,i-1)+"e"},12:{suffixes:["ogi"],f:e=>"l"===t[i-4]&&t.slice(0,i-1)},13:{suffixes:["li"],f:e=>void 0!==t[i-3]&&t[i-3].inString(this.li)?t.slice(0,i-2):t},length:14};return e[0]+this.replaceMap(e[1],s)}thirdStep(t){let e=this.getR1(t),i=(t=e[1]).length,s={0:{suffixes:["ational"],f:e=>t.slice(0,i-5)+"e"},1:{suffixes:["tional"],f:e=>t.slice(0,i-2)},2:{suffixes:["alize","icate","iciti"],f:e=>t.slice(0,i-3)},3:{suffixes:["ative"],f:e=>{let s=this.getR2(t);return s[1].slice(s[1].length-5)===e&&t.slice(0,i-5)}},4:{suffixes:["ical"],f:e=>t.slice(0,i-2)},5:{suffixes:["ness","ful"],f:e=>t.slice(0,i-e.length)},length:6};return e[0]+this.replaceMap(t,s)}fourthStep(t){let e=this.getR1(t),i=this.getR2(e[1]),s=(t=i[1]).length,r={0:{suffixes:["ement","ance","ence","able","ible","ment","ant","ent","ism","ate","iti","ous","ive","ize"],f:e=>t.slice(0,s-e.length)},1:{suffixes:["ion"],f:e=>!(void 0===t[s-4]||!t[s-4].inString(["s","t"]))&&t.slice(0,s-3)},2:{suffixes:["al","er","ic"],f:e=>t.slice(0,s-2)},length:3};return e[0]+i[0]+this.replaceMap(t,r)}fifthStep(t){let e=this.getR1(t),i=(t=e[1]).length,s={0:{suffixes:["e"],f:e=>{let s=this.getR2(t);return("e"===s[1][s[1].length-1]||!this.isShortSyllable(t.slice(i-4,i-1)))&&t.slice(0,i-1)}},1:{suffixes:["l"],f:e=>{let s=this.getR2(t);return"l"===s[1][s[1].length-1]?t.slice(0,i-1):t}},length:2};return e[0]+this.replaceMap(t,s)}isShortSyllable(t){return!(3!==t.length||t[0].inString(this.vowel)||!t[1].inString(this.vowel)||t[2].inString([...this.vowel,"w","x","Y"]))||!(2!==t.length||!t[0].inString(this.vowel)||t[1].inString(this.vowel))}isShort(t){return t.length,""===this.getR1(t)[1]&&this.isShortSyllable(t.substr(-3))}};const r=[["вшись","вши","в"],["ывшись","ившись","ывши","ивши","ив","ыв"],[6,5,4,3,2,1]],n=[["его","ого","ему","ому","ими","ыми","ее","ие","ые","ое","ей","ий","ый","ой","ем","им","ым","ом","их","ых","ую","юю","ая","яя","ою","ею"],[3,2]],l=[["ем","нн","вш","ющ","щ"],["ивш","ывш","ующ"],[3,2,1]],o=[["ся","сь"],[2]],h=[["ете","йте","ешь","нно","ла","на","ли","ем","ло","но","ет","ют","ны","ть","н","й","л"],["ейте","уйте","ует","уют","ило","ыло","ено","ила","ыла","ена","ите","или","ены","ить","ыть","ишь","ыли","ей","уй","ил","ыл","им","ым","ен","ят","ит","ыт","ую","ю"],[4,3,2,1]],f=[["иями","ями","ами","ией","иях","иям","ием","ев","ов","ие","ье","еи","ии","ей","ой","ий","ям","ем","ам","ом","ах","ях","ию","ью","ю","ия","ья","ю","и","о","у","ы","ь","й","е","а","я"],[4,3,2,1]],u=[["ейше","ейш"],[4,3]],a=[["ость","ост"],[4,3]];var g=class{constructor(){this.vowelCodes=["а","е","ё","и","о","у","ы","э","ю","я"]}getRV(t){let e=0;for(;e<t.length-1;){if(!t[e].inString([...this.vowelCodes,"ь","ъ"])&&t[e+1].inString(this.vowelCodes))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}getR1(t){let e=0;for(;e<t.length-1;){if(t[e].inString(this.vowelCodes)&&!t[e+1].inString([...this.vowelCodes,"ь","ъ"]))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}getR2(t){return this.getR1(t)}stemWord(t){let e,i,s,r,n,l,o;if(t.length<=2)return t;let h=[];1===(t=t.split("-")).length&&(t=t[0].split(String.fromCharCode(8208)));for(let f=0;f<t.length;f++){if(e=this.getRV(t[f])[0],!1===(r=this.firstStep(t[f]))){h.push(t[f]);continue}n=this.secondStep(r),i=this.getR1(e+n),s=this.getR2(i[1]),l=this.thirdStep(s[1]);let u=this.getRV(i[0]+s[0]+l);o=this.fourthStep(u[1]),h.push(u[0]+o)}return t.length>=2?h.join("-"):h[0]}findEnding(t,e,i=!1){let s=e,r=[],n=0,l=3===t.length?t[2]:t[1];for(let o=0;o<l.length;o++)if(e.length>=l[o]&&(n=e.length-l[o],s=e.slice(n),r=3===t.length?e.in([1072,1103],n-1)||void 0===e[n-1]&&i?t[0]:t[1]:t[0],s.inString(r)))return this.unDoubleN(e.slice(0,e.length-s.length));return!1}firstStep(t){let e,i,s=!1,u=this.getRV(t)[0],a=this.getRV(t)[1];return!1!==(i=this.findEnding(r,t))?this.getRV(i)[1]:""!==a&&(!1!==(i=this.findEnding(o,a))&&(s=!0,a=this.unDoubleN(i)),!1!==(i=this.findEnding(n,a))?!1!==(e=this.findEnding(l,i,u[u.length-1].inString(["а","я"])))?e:i:!1!==(i=this.findEnding(h,a,u[u.length-1].inString(["а","я"])))?i:s||!1===(i=this.findEnding(f,a))?a:i)}secondStep(t){return"и"===t[t.length-1]?t.slice(0,t.length-1):t}thirdStep(t){if(t.length>=3){let e=this.findEnding(a,t);return!1!==e?e:t}return t}fourthStep(t){let e;return(e=this.unDoubleN(t))!==t?e:!1!==(e=this.findEnding(u,t))?this.unDoubleN(e):"ь"===t[t.length-1]?t.slice(0,t.length-1):t}unDoubleN(t){return"н"===t[t.length-1]&&"н"===t[t.length-2]?t.slice(0,t.length-1):t}};var c=class{constructor(){this.eng=new s,this.rus=new g}stemWords(t,e="any"){let i=[],s=!1;"rus"===e?s=this.rus:"eng"===e&&(s=this.eng);for(let r=0;r<t.length;r++)"any"===e&&(s=this.chooseLanguage(t[r])),i.push(!1!==e?s.stemWord(t[r]):t[r]);return i}chooseLanguage(t){return t[0]>="a"&&t[0]<="z"?this.eng:t[0]>="а"&&t[0]<="я"&&this.rus}};var p=["а","вдобавок","имен","такж","то","благодар","том","что","благ","буд","будт","в","результат","чег","тог","связ","с","тем","сил","случа","если","врем","как","ввид","вопрек","врод","вследств","да","еще","и","но","даб","даж","дар","для","чтоб","же","едва","лиш","ежел","бы","не","зат","зач","все","знач","поэт","прит","все-так","следовательн","тогд","ибо","из-за","или","каб","скор","словн","тольк","так","как-то","когд","кол","к","кром","ли","либ","межд","нежел","стольк","скольк","невзир","на","независим","от","несмотр","ни","однак","особен","оттог","отчег","перед","по","мер","причин","подобн","пок","покамест","покуд","посл","поскольк","пот","поч","прежд","чем","при","всем","услов","прич","пуска","пуст","рад","раз","раньш","тех","пор","бол","есть","тож","чут","точн","хот","я","он","этот","они","мы","ве","котор","она","сво","вы","ты","его","себ","ее","вот","друг","наш","сам","мо","кто","там","их","ничт","кажд","зде","что-то","всегд","ваш","никт","никогд","никак","некотор","тво","куд","кто-то","се","туд","как-нибуд","всег","откуд","сюд","стол","где-то","что-нибуд","поч-то","нек","когд-то","отсюд","че","нечт","кто-нибуд","вон","оттуд","как-либ","куд-то","никуд","таков","ко","некогд","нигд","ко-что","когд-нибуд","че-то","где-нибуд","так-то","что-либ","всюд","откуд-то","ничут","куд-нибуд","скол","тут-то","этак","тот-то","ко-как","ко-кто","зач-то","ко-где","кто-либ","нект","отчег-то","каков","эдак","нибуд","тогд-то","чег-то","когд-либ","отовсюд","нич","досел","оны","ниоткуд","эки","че-нибуд","сям","ник","дела","мног","может","быт","долж","вне","конец","сказа","видел","сейчас","из","немн","тот","те","во","имеет","её","оно","за","подойд","мог","имет","имел","был","до","явля","иди","через","под","над","очен","пут","хорош","где","кем","хотел","видет","вопрос","данн","кардинальн","называ","непривычн","нескольк","полност","это","нег","б","г","д","е","ж","з","й","л","м","н","о","п","р","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];var d=["about","abov","after","again","all","also","am","an","and","anoth","ani","ar","as","at","be","becaus","been","befor","be","below","between","both","but","by","cam","can","cannot","com","could","did","do","doe","do","dur","each","few","for","from","further","get","got","has","had","he","hav","her","her","him","himself","his","how","if","in","into","is","it","it","itself","lik","mak","mani","me","might","mor","most","much","must","my","myself","never","now","of","on","onli","or","other","our","our","ourselv","out","over","own","said","sam","see","should","sinc","so","som","still","such","tak","than","that","the","their","their","them","themselv","then","ther","thes","they","this","thos","through","to","too","under","until","up","veri","was","way","we","well","wer","what","wher","when","which","whil","who","whom","with","would","whi","you","your","your","yourself","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var S=class{static countDescriptors(t){let e={};for(let i=0;i<t.length;i++)e[t[i]]=e.hasOwnProperty(t[i])?e[t[i]]+1:1;return e}static cleanDescriptors(t){for(let e in t)-1!==this.chooseLanguage(e).indexOf(e)&&delete t[e]}static chooseLanguage(t){return t[0]>="a"&&t[0]<="z"?d:p}static compressDescriptors(t){let e=[],i=Object.keys(t),s=Object.values(t);for(let r=0;r<Object.keys(t).length;r++)e.push([i[r],s[r]]);e=e.qsort((t,e)=>t[1]>e[1]?1:t[1]===e[1]&&t[0]>e[0]?1:void 0),t={};for(let i=0;i<e.length&&i<20;i++)t[e[i][0]]=e[i][1];return t}static concatDescriptors(t){let e=JSON.parse(localStorage.getItem("allDescriptors")),i=Object.keys(t),s=Object.values(t);if(e){for(let t=0;t<i.length;t++)e.hasOwnProperty(i[t])?e[i[t]]+=s[t]:e[i[t]]=s[t];localStorage.setItem("docCount",+localStorage.getItem("docCount")+1),localStorage.setItem("allDescriptors",JSON.stringify(e))}else localStorage.setItem("docCount",1),localStorage.setItem("allDescriptors",JSON.stringify(t))}static getDescriptors(t){let e=this.countDescriptors(t);return this.cleanDescriptors(e),this.compressDescriptors(e)}};const m=new class{constructor(){this.goodSymbol=(t=>this.goodSymbols.find(e=>t>=e[0]&&t<=e[1])),this.hyphen=((t,e)=>this.goodSymbol(t.charCodeAt(e-1))&&this.goodSymbol(t.charCodeAt(e+1))),this.irrationalNumber=((t,e)=>Number.isInteger(Number.parseInt(t[e-1]))&&Number.isInteger(Number.parseInt(t[e+1]))),this.goodSymbols=[[48,57],[97,122],[1072,1103],[1105,1105]]}breakText(t){t=t.toLowerCase();let e=[],i="";for(let s=0;s<t.length;s++)this.goodSymbol(t.charCodeAt(s))||t.in([45,8208],s)&&this.hyphen(t,s)||t.in([44],s)&&this.irrationalNumber(t,s)?i+=t[s]:""!==i.trim()&&(e.push(i),i="");return""!==i.trim()&&e.push(i),e}},y=new c;onmessage=(t=>{try{if("break"===t.data.action)postMessage({action:"break",result:m.breakText(t.data.text)});else if("stem"===t.data.action)postMessage({action:"stem",result:y.stemWords(t.data.words,t.data.lang),lang:t.data.lang});else if("descriptors"===t.data.action){let e="any"!==t.data.lang?y.stemWords(t.data.words):t.data.words;postMessage({action:t.data.action,result:S.getDescriptors(e)})}}catch(t){postMessage({action:"error",error:t.stack})}})}]);',i.p+"worker.bundle.js")}},function(t,e){String.prototype.inString=function(t=[]){if("object"!=typeof t)throw new Error("Argument is not an array");return t.find(t=>t===this.toString())},String.prototype.in=function(t=[],e=0){if("object"!=typeof t)throw new Error("Argument is not an array");return t.find(t=>t===this.charCodeAt(e))},String.prototype.split=function(t="",e=-1){let i=[],s="";for(let r=0;r<this.length;r++){if(i.length===e)return i;""===t?i.push(this[r]):this[r]!==t?s+=this[r]:(i.push(s),s="")}return""!==s.trim()&&i.push(s),i},String.prototype.reverseStr=function(){let t="";for(let e=this.length-1;e>=0;e--)t+=this[e];return t},String.prototype.multipleSpaces=function(){let t="";for(let e=0;e<this.length;e++){if(this.in([32,160,65279],e)&&this.in([32,160,65279],e+1))continue;t+=this[e]}return t},String.prototype.hyphenSpaces=function(){let t="";for(let e=0;e<this.length;e++)this.in([32,160,65279],e)&&(this.in([45,8208],e-1)||this.in([45,8208],e+1))||(t+=this[e]);return t}},function(t,e){Array.prototype.swap=function(t,e){let i=this[e];this[e]=this[t],this[t]=i},Array.prototype.isort=function(t,e=0,i=this.length-1){for(let s=e+1;s<=i;s++)for(let e=s;e>0&&t(this[e],this[e-1]);e--)this.swap(e-1,e);return this},Array.prototype.qsort=function(t,e=0,i=this.length-1){if(void 0===t&&(t=((t,e)=>t<e?1:0)),"function"!=typeof t)throw new Error("Argument compareFn must be a function");if(i-e<=32)return this.isort(t,e,i);let s=e,r=i,n=this[Math.floor(e+Math.random()*(i+1-e))];for(;s<=r;){for(;t(this[s],n);)s++;for(;t(n,this[r]);)r--;s<=r&&this.swap(s++,r--)}return e<r&&this.qsort(t,e,r),i>s&&this.qsort(t,s,i),this}},function(t,e,i){"use strict";var s=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var i;try{(i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),i=i.getBlob()}catch(e){i=new Blob([t])}return new Worker(s.createObjectURL(i))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(1),i(2);var s=class{static renderSteps(t,e=[],i=[]){t.map((t,s)=>{e[s]?t.classList.add("animate"):t.classList.remove("animate"),i[s]?t.classList.add("active"):t.classList.remove("active")})}static loader(t){document.querySelector(".lds-ellipsis").style.opacity=t?"1":"0"}static createElement(t,e,i){return`<${t} class="${e}">${i}</${t}>`}static createLine(t,e,i){let s,r;return r=this.createElement("div","number",t+1)+this.createElement("div","word",e),i&&(r+=this.createElement("div","word",i)),s=this.createElement("div","line",r)}static print(t,e,i=[]){let s;if(e.length){let r="";for(let t=0;t<e.length;t++)r+=s=this.createLine(t,e[t],i[t]);t.innerHTML=r}else t.innerHTML=this.createLine(0,"","")}static printWeights(t,e,i){let s="";t.innerHTML="";for(let r=0;r<i.length;r++)s+=this.createElement("div","weight",e[r]+": "+Math.round(100*i[r])/100),t.innerHTML=s}static printDocuments(t,e){t.innerHTML="";let i=Object.keys(e),s=Object.values(e),r=0,n="",o="";for(let t=0;t<i.length;t++)0!==s[t]&&(r++,o=this.createElement("div","num",r)+this.createElement("div","title",i[t]+"...")+this.createElement("div","docinfo",`Релевантность: ${s[t]}%`),n+=this.createElement("div","document",o));return t.innerHTML=n,r}static catHandle(){this.cat(!0),setTimeout(t=>this.cat(!1),1500)}static cat(t){document.querySelector(".cat").style.animation=t?"scale 0.2s ease-in-out both":"scaleOut 0.2s ease-in-out both"}};var r=class{static encodeBase64(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))}static decodeBase64(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}};var n=class{constructor(){this.vowel=["a","e","i","o","u","y"],this.double=["bb","dd","ff","gg","mm","nn","pp","rr","tt"],this.li=["c","d","e","g","h","k","m","n","r","t"]}getR1(t){let e=0;for(;e<t.length-1;){if(t[e].inString(this.vowel)&&!t[e+1].inString(this.vowel))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}getR2(t){return this.getR1(t)}stemWord(t){return t.length>2&&(t=this.removeInitialApostroph(t),t=this.setY(t),t=this.preparatoryStep(t),t=this.firstStepA(t),t=this.firstStepB(t),t=this.firstStepC(t),t=this.secondStep(t),t=this.thirdStep(t),t=this.fourthStep(t),t=this.fifthStep(t)),t.toLowerCase()}removeInitialApostroph(t){return t[0].in([39,8217])?t.slice(1):t}setY(t){"y"===(t=t.split(""))[0]&&(t[0]="Y");for(let e=1;e<t.length;e++)"y"===t[e]&&t[e-1].inString(this.vowel)&&(t[e]="Y");return t.join("")}replaceMap(t,e={}){t.length;for(let i=0;i<e.length;i++)for(let s=0;s<e[i].suffixes.length;s++)if(t.slice(t.length-e[i].suffixes[s].length)===e[i].suffixes[s]){let t=e[i].f(e[i].suffixes[s]);if(!1===t)continue;return t}return t}preparatoryStep(t){let e=t.length,i={0:{suffixes:["'s'","'s","'"],f:t=>i.delete(t)},delete:i=>t.slice(0,e-i.length),length:1};return this.replaceMap(t,i)}firstStepA(t){let e=t.length,i={0:{suffixes:["sses"],f:()=>t.slice(0,e-4)+"ss"},1:{suffixes:["ied","ies"],f:()=>e-3>1?t.slice(0,e-3)+"i":t.slice(0,e-3)+"ie"},2:{suffixes:["us","ss"],f:()=>t},3:{suffixes:["s"],f:()=>{for(let i=2;i<t.length;i++)if(void 0!==t[e-i-1]&&t[e-i-1].inString(this.vowel))return t.slice(0,e-1);return t}},length:4};return this.replaceMap(t,i)}firstStepB(t){let e=this.getR1(t),i=t.length,s={0:{suffixes:["eedly"],f:t=>s.eedly(t)},1:{suffixes:["ingly","edly"],f:t=>s.ingly(t)},2:{suffixes:["eed"],f:t=>s.eedly(t)},3:{suffixes:["ing","ed"],f:e=>{let i=s.ingly(e);return!1===i?t:i}},eedly:t=>e[1].slice(e[1].length-t.length)===t&&e[0]+e[1].slice(0,e[1].length-t.length)+"ee",ingly:e=>{let s=!1;for(let r=0;r<i-e.length;r++)if(t[r].inString(this.vowel)){t=t.slice(0,i-e.length),i=t.length,s=!0;break}return!!s&&(t.slice(i-2).inString(["at","bl","iz"])?t+"e":t.slice(i-2).inString(this.double)?t.slice(0,i-1):this.isShort(t)?t+"e":t)},length:4};return this.replaceMap(t,s)}firstStepC(t){t=t.split("");for(let e=0;e<t.length;e++)t[e].inString(["y","Y"])&&void 0!==t[e-1]&&!t[e-1].inString(this.vowel)&&e-1>0&&(t[e]="i");return t.join("")}secondStep(t){let e=this.getR1(t),i=(t=e[1]).length,s={0:{suffixes:["ousness","iveness","fulness"],f:e=>t.slice(0,i-4)},1:{suffixes:["ational","ization"],f:e=>t.slice(0,i-5)+"e"},2:{suffixes:["tional","lessli"],f:e=>t.slice(0,i-2)},3:{suffixes:["biliti"],f:e=>t.slice(0,i-5)+"e"},4:{suffixes:["entli","ousli","fulli"],f:e=>t.slice(0,i-2)},5:{suffixes:["ation","iviti"],f:e=>t.slice(0,i-3)+"e"},6:{suffixes:["alism"],f:e=>t.slice(0,i-3)},7:{suffixes:["enci","anci","abli"],f:e=>t.slice(0,i-1)+"e"},8:{suffixes:["izer"],f:e=>t.slice(0,i-1)},9:{suffixes:["ator"],f:e=>t.slice(0,i-2)+"e"},10:{suffixes:["alli"],f:e=>t.slice(0,i-2)},11:{suffixes:["bli"],f:e=>t.slice(0,i-1)+"e"},12:{suffixes:["ogi"],f:e=>"l"===t[i-4]&&t.slice(0,i-1)},13:{suffixes:["li"],f:e=>void 0!==t[i-3]&&t[i-3].inString(this.li)?t.slice(0,i-2):t},length:14};return e[0]+this.replaceMap(e[1],s)}thirdStep(t){let e=this.getR1(t),i=(t=e[1]).length,s={0:{suffixes:["ational"],f:e=>t.slice(0,i-5)+"e"},1:{suffixes:["tional"],f:e=>t.slice(0,i-2)},2:{suffixes:["alize","icate","iciti"],f:e=>t.slice(0,i-3)},3:{suffixes:["ative"],f:e=>{let s=this.getR2(t);return s[1].slice(s[1].length-5)===e&&t.slice(0,i-5)}},4:{suffixes:["ical"],f:e=>t.slice(0,i-2)},5:{suffixes:["ness","ful"],f:e=>t.slice(0,i-e.length)},length:6};return e[0]+this.replaceMap(t,s)}fourthStep(t){let e=this.getR1(t),i=this.getR2(e[1]),s=(t=i[1]).length,r={0:{suffixes:["ement","ance","ence","able","ible","ment","ant","ent","ism","ate","iti","ous","ive","ize"],f:e=>t.slice(0,s-e.length)},1:{suffixes:["ion"],f:e=>!(void 0===t[s-4]||!t[s-4].inString(["s","t"]))&&t.slice(0,s-3)},2:{suffixes:["al","er","ic"],f:e=>t.slice(0,s-2)},length:3};return e[0]+i[0]+this.replaceMap(t,r)}fifthStep(t){let e=this.getR1(t),i=(t=e[1]).length,s={0:{suffixes:["e"],f:e=>{let s=this.getR2(t);return("e"===s[1][s[1].length-1]||!this.isShortSyllable(t.slice(i-4,i-1)))&&t.slice(0,i-1)}},1:{suffixes:["l"],f:e=>{let s=this.getR2(t);return"l"===s[1][s[1].length-1]?t.slice(0,i-1):t}},length:2};return e[0]+this.replaceMap(t,s)}isShortSyllable(t){return!(3!==t.length||t[0].inString(this.vowel)||!t[1].inString(this.vowel)||t[2].inString([...this.vowel,"w","x","Y"]))||!(2!==t.length||!t[0].inString(this.vowel)||t[1].inString(this.vowel))}isShort(t){return t.length,""===this.getR1(t)[1]&&this.isShortSyllable(t.substr(-3))}};const o=[["вшись","вши","в"],["ывшись","ившись","ывши","ивши","ив","ыв"],[6,5,4,3,2,1]],l=[["его","ого","ему","ому","ими","ыми","ее","ие","ые","ое","ей","ий","ый","ой","ем","им","ым","ом","их","ых","ую","юю","ая","яя","ою","ею"],[3,2]],a=[["ем","нн","вш","ющ","щ"],["ивш","ывш","ующ"],[3,2,1]],h=[["ся","сь"],[2]],u=[["ете","йте","ешь","нно","ла","на","ли","ем","ло","но","ет","ют","ны","ть","н","й","л"],["ейте","уйте","ует","уют","ило","ыло","ено","ила","ыла","ена","ите","или","ены","ить","ыть","ишь","ыли","ей","уй","ил","ыл","им","ым","ен","ят","ит","ыт","ую","ю"],[4,3,2,1]],c=[["иями","ями","ами","ией","иях","иям","ием","ев","ов","ие","ье","еи","ии","ей","ой","ий","ям","ем","ам","ом","ах","ях","ию","ью","ю","ия","ья","ю","и","о","у","ы","ь","й","е","а","я"],[4,3,2,1]],d=[["ейше","ейш"],[4,3]],f=[["ость","ост"],[4,3]];var g=class{constructor(){this.vowelCodes=["а","е","ё","и","о","у","ы","э","ю","я"]}getRV(t){let e=0;for(;e<t.length-1;){if(!t[e].inString([...this.vowelCodes,"ь","ъ"])&&t[e+1].inString(this.vowelCodes))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}getR1(t){let e=0;for(;e<t.length-1;){if(t[e].inString(this.vowelCodes)&&!t[e+1].inString([...this.vowelCodes,"ь","ъ"]))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}getR2(t){return this.getR1(t)}stemWord(t){let e,i,s,r,n,o,l;if(t.length<=2)return t;let a=[];1===(t=t.split("-")).length&&(t=t[0].split(String.fromCharCode(8208)));for(let h=0;h<t.length;h++){if(e=this.getRV(t[h])[0],!1===(r=this.firstStep(t[h]))){a.push(t[h]);continue}n=this.secondStep(r),i=this.getR1(e+n),s=this.getR2(i[1]),o=this.thirdStep(s[1]);let u=this.getRV(i[0]+s[0]+o);l=this.fourthStep(u[1]),a.push(u[0]+l)}return t.length>=2?a.join("-"):a[0]}findEnding(t,e,i=!1){let s=e,r=[],n=0,o=3===t.length?t[2]:t[1];for(let l=0;l<o.length;l++)if(e.length>=o[l]&&(n=e.length-o[l],s=e.slice(n),r=3===t.length?e.in([1072,1103],n-1)||void 0===e[n-1]&&i?t[0]:t[1]:t[0],s.inString(r)))return this.unDoubleN(e.slice(0,e.length-s.length));return!1}firstStep(t){let e,i,s=!1,r=this.getRV(t)[0],n=this.getRV(t)[1];return!1!==(i=this.findEnding(o,t))?this.getRV(i)[1]:""!==n&&(!1!==(i=this.findEnding(h,n))&&(s=!0,n=this.unDoubleN(i)),!1!==(i=this.findEnding(l,n))?!1!==(e=this.findEnding(a,i,r[r.length-1].inString(["а","я"])))?e:i:!1!==(i=this.findEnding(u,n,r[r.length-1].inString(["а","я"])))?i:s||!1===(i=this.findEnding(c,n))?n:i)}secondStep(t){return"и"===t[t.length-1]?t.slice(0,t.length-1):t}thirdStep(t){if(t.length>=3){let e=this.findEnding(f,t);return!1!==e?e:t}return t}fourthStep(t){let e;return(e=this.unDoubleN(t))!==t?e:!1!==(e=this.findEnding(d,t))?this.unDoubleN(e):"ь"===t[t.length-1]?t.slice(0,t.length-1):t}unDoubleN(t){return"н"===t[t.length-1]&&"н"===t[t.length-2]?t.slice(0,t.length-1):t}};var p=class{constructor(){this.eng=new n,this.rus=new g}stemWords(t,e="any"){let i=[],s=!1;"rus"===e?s=this.rus:"eng"===e&&(s=this.eng);for(let r=0;r<t.length;r++)"any"===e&&(s=this.chooseLanguage(t[r])),i.push(!1!==e?s.stemWord(t[r]):t[r]);return i}chooseLanguage(t){return t[0]>="a"&&t[0]<="z"?this.eng:t[0]>="а"&&t[0]<="я"&&this.rus}};const m=(t,e)=>t>e?1:0,S=(t,e)=>{if(t[1]>e[1])return 1},y=new class{constructor(){this.goodSymbol=(t=>this.goodSymbols.find(e=>t>=e[0]&&t<=e[1])),this.hyphen=((t,e)=>this.goodSymbol(t.charCodeAt(e-1))&&this.goodSymbol(t.charCodeAt(e+1))),this.irrationalNumber=((t,e)=>Number.isInteger(Number.parseInt(t[e-1]))&&Number.isInteger(Number.parseInt(t[e+1]))),this.goodSymbols=[[48,57],[97,122],[1072,1103],[1105,1105]]}breakText(t){t=t.toLowerCase();let e=[],i="";for(let s=0;s<t.length;s++)this.goodSymbol(t.charCodeAt(s))||t.in([45,8208],s)&&this.hyphen(t,s)||t.in([44],s)&&this.irrationalNumber(t,s)?i+=t[s]:""!==i.trim()&&(e.push(i),i="");return""!==i.trim()&&e.push(i),e}},b=new p;var w=class{static handleRequest(t){let e=y.breakText(t.multipleSpaces().hyphenSpaces());return b.stemWords(e)}static calcWeights(t){let e=0,i=0,s=0,r=[],n=JSON.parse(localStorage.getItem("allDescriptors"));if(!n)return!1;for(let s=0;s<t.length;s++)n.hasOwnProperty(t[s])&&(i++,e+=n[t[s]]);if(i===t.length)for(let i=0;i<t.length;i++)r.push(n[t[i]]/e);else if(i>0&&i<t.length){e+=(s=e/i)*(t.length-i);for(let i=0;i<t.length;i++)r.push(n.hasOwnProperty(t[i])?n[t[i]]/e:s/e)}else for(let e=0;e<t.length;e++)r.push(1/t.length);return r}static calculateR(t,e){let i,s={},n=[];for(let s=0;s<localStorage.length;s++){let o=0;try{if("document"===(i=JSON.parse(localStorage.getItem(localStorage.key(s)))).type){for(let s=0;s<t.length;s++){let r=i.descriptors.indexOf(t[s]);-1!==r&&(r<4?o+=1*e[s]:r<10?o+=.5*e[s]:r<20&&(o+=1/3*e[s]))}o=Math.round(o/t.length*100),n.push([r.decodeBase64(localStorage.key(s)),o])}}finally{continue}}n.qsort(S);for(let t=0;t<n.length;t++)s[n[t][0]]=n[t][1];return s}};var v=class{constructor(t){this.store=t,this.search=document.querySelector(".search"),this.searchButton=document.querySelector(".searchbutton"),this.searchBox=document.querySelector(".searchbox"),this.weightBox=document.querySelector(".weights"),this.searchInput=document.querySelector(".searchinput"),this.documentsBox=document.querySelector(".documents"),this.searchButtonHandler=this.searchButtonHandler.bind(this),this.searchInputHandler=this.searchInputHandler.bind(this)}get state(){return this.store.state}get dispatch(){return this.store.dispatch}get docCount(){return+localStorage.getItem("docCount")}searchButtonHandler(t){this.state.isSearchBoxOpen?(this.search.style.opacity=0,this.search.style.pointerEvents="none",this.searchBox.classList.remove("animation"),this.searchButton.classList.remove("close"),this.searchInput.blur()):(this.search.style.opacity=1,this.search.style.pointerEvents="unset",this.searchBox.classList.add("animation"),this.searchButton.classList.add("close"),this.searchInput.focus()),this.dispatch({isSearchBoxOpen:!this.state.isSearchBoxOpen})}searchInputHandler(t){let e,i,r=[];""!==t.target.value.trim()?(this.search.style.background="rgba(255,255,255, 0.95)",this.documentsBox.style.paddingLeft="15px",this.docCount?(e=w.handleRequest(this.searchInput.value),i=w.calcWeights(e),r=w.calculateR(e,i),s.printWeights(this.weightBox,e,i),this.weightBox.classList.add("animation"),s.printDocuments(this.documentsBox,r)||(this.documentsBox.textContent="По вашему запросу ничего не найдено",this.documentsBox.style.paddingLeft="20px")):(this.documentsBox.textContent="Проиндексируйте хотя бы один документ",this.documentsBox.style.paddingLeft="20px"),this.documentsBox.style.animation="0.15s ease-in-out 0.08s fadeIn both"):(this.documentsBox.style.animation="unset",this.weightBox.innerHTML="",this.weightBox.classList.remove("animation"),this.documentsBox.innerHTML="",this.search.style.background="rgba(0, 0, 0, 0.2)")}};var x=class{static countNGrams(t,e=3){let i={};return t.map(t=>{1===(t=t.split("-")).length&&(t=t[0].split(String.fromCharCode(8208)));for(let s=0;s<t.length;s++)if(t[s].length>=e)for(let r=0;r<t[s].length-e+1;r++){let n=t[s].slice(r,r+e);i[n]=i.hasOwnProperty(n)?i[n]+1:1}}),i}};var L=class{constructor(t){this.store=t,this.output=document.querySelector(".linesbox"),this.nGramButton=document.querySelector(".ngram"),this.NInput=document.querySelector("input[name=ninput]"),this.nGramButtonHandler=this.nGramButtonHandler.bind(this),this.NInputHandler=this.NInputHandler.bind(this)}get state(){return this.store.state}get dispatch(){return this.store.dispatch}NInputHandler(t){this.dispatch({N:Number.isNaN(Number.parseInt(t.target.value))?3:Number.parseInt(t.target.value)})}nGramButtonHandler(t){if(this.state.wordList.length&&"ninput"!==t.target.name){let t=x.countNGrams(this.state.wordList,this.state.N);this.dispatch({nGramKeys:Object.keys(t),nGramValues:Object.values(t),currentList:["nGramKeys","nGramValues"]}),s.print(this.output,this.state.nGramKeys,this.state.nGramValues)}}};var B=class{constructor(t){this.store=t,this.output=document.querySelector(".linesbox"),this.ascSortButton=document.querySelector("div[data-type=asc]"),this.descSortButton=document.querySelector("div[data-type=desc]"),this.directionButton=document.querySelector(".direction"),this.sortHandler=this.sortHandler.bind(this),this.getSortedArray=this.getSortedArray.bind(this),this.directionHandler=this.directionHandler.bind(this)}get state(){return this.store.state}get dispatch(){return this.store.dispatch}getSortedArray(t){const{currentList:e,direction:i}=this.state;let s,r,n=[],o=[],l=[];if(2===e.length){s=t.hasOwnProperty("side")?t.side:1,r=((t,e)=>t[s]<e[s]?1:0),t.hasOwnProperty("order")&&"desc"===t.order&&(r=((t,e)=>t[s]>e[s]?1:0));for(let t=0;t<this.state[e[0]].length;t++){let s=i?this.state[e[0]][t]:this.state[e[0]][t].toString().reverseStr(),r=i?this.state[e[1]][t]:this.state[e[1]][t].toString().reverseStr();n.push([s,r])}return n.qsort(r).map(t=>{o.push(i?t[0]:t[0].toString().reverseStr()),l.push(i?t[1]:t[1].toString().reverseStr())}),[o,l]}return t.hasOwnProperty("order")&&(r="desc"===t.order?m:void 0),n=this.state[e[0]].slice(),[n=i?n.qsort(r):(n=n.map(t=>t.toString().reverseStr())).qsort(r).map(t=>t.toString().reverseStr())]}sortHandler(t,e={}){const{currentList:i}=this.state;if("object"!=typeof i||!i.length)return!1;let r=this.getSortedArray(e);s.print(this.output,...r)}directionHandler(t){this.directionButton.style.transform=`rotateZ(${this.state.direction?180:0}deg)`,this.dispatch({direction:!this.state.direction})}};var k=class{constructor(t){this.store=t,this.input=document.querySelector("textarea"),this.fileLoader=document.querySelector("#fileloader"),this.reader=new FileReader,this.reader.addEventListener("loadend",t=>{this.input.value=t.target.result,this.dispatch({isInputChanged:!0})}),this.fileLoaderHandler=this.fileLoaderHandler.bind(this)}get state(){return this.store.state}get dispatch(){return this.store.dispatch}fileLoaderHandler(t){this.reader.readAsText(t.target.files[0])}};var O=["а","вдобавок","имен","такж","то","благодар","том","что","благ","буд","будт","в","результат","чег","тог","связ","с","тем","сил","случа","если","врем","как","ввид","вопрек","врод","вследств","да","еще","и","но","даб","даж","дар","для","чтоб","же","едва","лиш","ежел","бы","не","зат","зач","все","знач","поэт","прит","все-так","следовательн","тогд","ибо","из-за","или","каб","скор","словн","тольк","так","как-то","когд","кол","к","кром","ли","либ","межд","нежел","стольк","скольк","невзир","на","независим","от","несмотр","ни","однак","особен","оттог","отчег","перед","по","мер","причин","подобн","пок","покамест","покуд","посл","поскольк","пот","поч","прежд","чем","при","всем","услов","прич","пуска","пуст","рад","раз","раньш","тех","пор","бол","есть","тож","чут","точн","хот","я","он","этот","они","мы","ве","котор","она","сво","вы","ты","его","себ","ее","вот","друг","наш","сам","мо","кто","там","их","ничт","кажд","зде","что-то","всегд","ваш","никт","никогд","никак","некотор","тво","куд","кто-то","се","туд","как-нибуд","всег","откуд","сюд","стол","где-то","что-нибуд","поч-то","нек","когд-то","отсюд","че","нечт","кто-нибуд","вон","оттуд","как-либ","куд-то","никуд","таков","ко","некогд","нигд","ко-что","когд-нибуд","че-то","где-нибуд","так-то","что-либ","всюд","откуд-то","ничут","куд-нибуд","скол","тут-то","этак","тот-то","ко-как","ко-кто","зач-то","ко-где","кто-либ","нект","отчег-то","каков","эдак","нибуд","тогд-то","чег-то","когд-либ","отовсюд","нич","досел","оны","ниоткуд","эки","че-нибуд","сям","ник","дела","мног","может","быт","долж","вне","конец","сказа","видел","сейчас","из","немн","тот","те","во","имеет","её","оно","за","подойд","мог","имет","имел","был","до","явля","иди","через","под","над","очен","пут","хорош","где","кем","хотел","видет","вопрос","данн","кардинальн","называ","непривычн","нескольк","полност","это","нег","б","г","д","е","ж","з","й","л","м","н","о","п","р","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];var R=["about","abov","after","again","all","also","am","an","and","anoth","ani","ar","as","at","be","becaus","been","befor","be","below","between","both","but","by","cam","can","cannot","com","could","did","do","doe","do","dur","each","few","for","from","further","get","got","has","had","he","hav","her","her","him","himself","his","how","if","in","into","is","it","it","itself","lik","mak","mani","me","might","mor","most","much","must","my","myself","never","now","of","on","onli","or","other","our","our","ourselv","out","over","own","said","sam","see","should","sinc","so","som","still","such","tak","than","that","the","their","their","them","themselv","then","ther","thes","they","this","thos","through","to","too","under","until","up","veri","was","way","we","well","wer","what","wher","when","which","whil","who","whom","with","would","whi","you","your","your","yourself","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];var I=class{static countDescriptors(t){let e={};for(let i=0;i<t.length;i++)e[t[i]]=e.hasOwnProperty(t[i])?e[t[i]]+1:1;return e}static cleanDescriptors(t){for(let e in t)-1!==this.chooseLanguage(e).indexOf(e)&&delete t[e]}static chooseLanguage(t){return t[0]>="a"&&t[0]<="z"?R:O}static compressDescriptors(t){let e=[],i=Object.keys(t),s=Object.values(t);for(let r=0;r<Object.keys(t).length;r++)e.push([i[r],s[r]]);e=e.qsort((t,e)=>t[1]>e[1]?1:t[1]===e[1]&&t[0]>e[0]?1:void 0),t={};for(let i=0;i<e.length&&i<20;i++)t[e[i][0]]=e[i][1];return t}static concatDescriptors(t){let e=JSON.parse(localStorage.getItem("allDescriptors")),i=Object.keys(t),s=Object.values(t);if(e){for(let t=0;t<i.length;t++)e.hasOwnProperty(i[t])?e[i[t]]+=s[t]:e[i[t]]=s[t];localStorage.setItem("docCount",+localStorage.getItem("docCount")+1),localStorage.setItem("allDescriptors",JSON.stringify(e))}else localStorage.setItem("docCount",1),localStorage.setItem("allDescriptors",JSON.stringify(t))}static getDescriptors(t){let e=this.countDescriptors(t);return this.cleanDescriptors(e),this.compressDescriptors(e)}},j=i(0),C=i.n(j);var H=class{constructor(t){this.store=t,this.input=document.querySelector("textarea"),this.output=document.querySelector(".linesbox"),this.worker=new C.a,this.breakWordButton=document.querySelector("div[data-type=breaktext]"),this.stemmingButton=document.querySelector("div[data-type=stemming]"),this.podButton=document.querySelector("div[data-type=pod]"),this.buttons=[this.breakWordButton,this.stemmingButton,this.podButton],this.workerHandler=this.workerHandler.bind(this),this.breakWordButtonHandler=this.breakWordButtonHandler.bind(this),this.stemmingButtonHandler=this.stemmingButtonHandler.bind(this),this.podButtonHandler=this.podButtonHandler.bind(this)}get state(){return this.store.state}get dispatch(){return this.store.dispatch}workerHandler(t){let e=t.data;if("break"===e.action)s.print(this.output,e.result),s.renderSteps(this.buttons,[!0,!0],[!0]),this.dispatch({wordList:e.result,isInputChanged:!1,stemmedList:[],currentList:["wordList"]});else if("stem"===e.action)s.print(this.output,this.state.wordList,e.result),s.renderSteps([this.stemmingButton,this.podButton],[!0,!0],[!0]),this.dispatch({stemmedList:e.result,currentList:["wordList","stemmedList"],lang:e.lang});else if("descriptors"===e.action){let t=Object.keys(e.result),i=Object.values(e.result),n=r.encodeBase64(this.input.value.split(" ",7).join(" "));t.length&&!localStorage.getItem(n)&&(localStorage.setItem(n,JSON.stringify({descriptors:t,n:i,type:"document"})),I.concatDescriptors(e.result),"1"===localStorage.getItem("docCount")&&s.catHandle()),s.print(this.output,t,i),s.renderSteps([this.podButton],[!0],[!0]),this.dispatch({descriptorsKeys:t,descriptorsValues:i,currentList:["descriptorsKeys","descriptorsValues"]})}else console.error(t.data.error);s.loader(!1)}breakWordButtonHandler(t){t.preventDefault();const{isInputChanged:e,wordList:i,sortedList:r,currentList:n}=this.state;if(!e)return this.dispatch({currentList:["wordList"]}),s.print(this.output,i),s.renderSteps(this.buttons,[!0,!0],[!0]),!1;s.loader(!0),this.worker.postMessage({action:"break",text:this.input.value.multipleSpaces().hyphenSpaces()})}stemmingButtonHandler(t){t.preventDefault();const{wordList:e,stemmedList:i,lang:r}=this.state;if(i.length&&t.target.dataset.lang===r)return this.dispatch({currentList:["wordList","stemmedList"]}),s.print(this.output,e,i),s.renderSteps([this.stemmingButton,this.podButton],[!0,!0],[!0]),!1;s.loader(!0),this.worker.postMessage({action:"stem",words:e.slice(),lang:t.target.dataset.lang})}podButtonHandler(t){const{wordList:e,stemmedList:i,lang:r}=this.state;t.preventDefault(),s.loader(!0),this.worker.postMessage({action:"descriptors",words:"any"===r?i:e,lang:r})}};function E(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}const N=new class{constructor(t){this.state=t,this.dispatch=this.dispatch.bind(this)}dispatch(t){return this.state=Object.freeze(function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),s.forEach(function(e){E(t,e,i[e])})}return t}({},this.state,t)),console.info("App state: ",this.state),this.state}}({isInputChanged:!0,isSearchBoxOpen:!1,direction:1,lang:"any",N:3,wordList:[],stemmedList:[],nGramKeys:[],nGramValues:[],descriptorsKeys:[],descriptorsValues:[],currentList:["wordList"]}),M=new v(N),q=new L(N),D=new B(N),A=new k(N),W=new H(N);var P=class{constructor(){this.store=N,this.input=document.querySelector("textarea"),this.createListeners()}get state(){return this.store.state}get dispatch(){return this.store.dispatch}createListeners(){A.fileLoader.addEventListener("change",A.fileLoaderHandler),D.ascSortButton.addEventListener("click",t=>D.sortHandler(t)),D.descSortButton.addEventListener("click",t=>D.sortHandler(t,{order:"desc"})),D.directionButton.addEventListener("click",D.directionHandler),M.searchButton.addEventListener("click",M.searchButtonHandler),M.searchInput.addEventListener("change",M.searchInputHandler),q.nGramButton.addEventListener("click",q.nGramButtonHandler),q.NInput.addEventListener("change",q.NInputHandler),W.worker.addEventListener("message",W.workerHandler),W.breakWordButton.addEventListener("click",W.breakWordButtonHandler),W.stemmingButton.addEventListener("click",W.stemmingButtonHandler),W.podButton.addEventListener("click",W.podButtonHandler),document.querySelector(".outputbox").addEventListener("click",t=>{"percent"===t.target.className&&(document.querySelector("main").style.gridTemplateColumns=`${100-t.target.dataset.percent}% ${t.target.dataset.percent}%`,t.target.dataset.percent=125-t.target.dataset.percent)}),this.input.addEventListener("change",t=>{this.dispatch({isInputChanged:!0})})}};i(4),i(5);new P}]);