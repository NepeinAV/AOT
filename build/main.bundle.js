!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e,n){t.exports=function(){return n(3)('!function(t){var n={};function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(r,o,function(n){return t[n]}.bind(null,o));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}String.prototype.inString=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("object"!==e(n))throw new Error("Argument is not an array");return n.find(function(n){return n===t.toString()})},String.prototype.in=function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("object"!==e(n))throw new Error("Argument is not an array");return n.find(function(n){return n===t.charCodeAt(r)})},String.prototype.reverseStr=function(){return this.split("").reverse().join("")},String.prototype.multipleSpaces=function(){for(var t="",n=0;n<this.length;n++)this.in([32,160,65279],n)&&this.in([32,160,65279],n+1)||(t+=this[n]);return t},String.prototype.hyphenSpaces=function(){for(var t="",n=0;n<this.length;n++)this.in([32,160,65279],n)?45!==this.charCodeAt(n+1)&&45!==this.charCodeAt(n-1)&&(t+=this[n]):t+=this[n];return t},String.prototype.lineWrapping=function(){for(var t="",n=0;n<this.length;n++)this.in([10,13],n)?t+=" ":t+=this[n];return t}},function(t,n){Array.prototype.swap=function(t,n){var e=this[n];this[n]=this[t],this[t]=e},Array.prototype.isort=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-1,r=n+1;r<=e;r++)for(var o=r;o>0&&t(this[o],this[o-1]);o--)this.swap(o-1,o);return this},Array.prototype.qsort=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-1;if(void 0===t&&(t=function(t,n){return t<n?1:0}),"function"!=typeof t)throw new Error("Argument compareFn must be a function");if(e-n<=32)return this.isort(t,n,e);for(var r=n,o=e,i=this[Math.floor(n+Math.random()*(e+1-n))];r<=o;){for(;t(this[r],i);)r++;for(;t(i,this[o]);)o--;r<=o&&this.swap(r++,o--)}return n<o&&this.qsort(t,n,o),e>r&&this.qsort(t,r,e),this}},function(t,n,e){"use strict";e.r(n);e(0),e(1);function r(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){var n=this;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.goodSymbol=function(t){return n.goodSymbols.find(function(n){return t>=n[0]&&t<=n[1]})},this.hyphen=function(t,e){return n.goodSymbol(t.charCodeAt(e-1))&&n.goodSymbol(t.charCodeAt(e+1))},this.goodSymbols=[[48,57],[97,122],[1072,1103],[1105,1105]]}return function(t,n,e){n&&r(t.prototype,n),e&&r(t,e)}(t,[{key:"breakText",value:function(t){t=t.toLowerCase();for(var n=[],e="",r=0;r<t.length;r++)this.goodSymbol(t.charCodeAt(r))||45===t.charCodeAt(r)&&this.hyphen(t,r)?e+=t[r]:""!==e.trim()&&(n.push(e),e="");return""!==e.trim()&&n.push(e),n}}]),t}(),i=[["вшись","вши","в"],["ывшись","ившись","ывши","ивши","ив","ыв"],[6,5,4,3,2,1]],s=[["его","ого","ему","ому","ими","ыми","ее","ие","ые","ое","ей","ий","ый","ой","ем","им","ым","ом","их","ых","ую","юю","ая","яя","ою","ею"],[3,2]],a=[["ся","сь"],[2]],u=[["ете","йте","ешь","нно","ла","на","ли","ем","ло","но","ет","ют","ны","ть","н","й","л"],["ейте","уйте","ует","уют","ило","ыло","ено","ила","ыла","ена","ите","или","ены","ить","ыть","ишь","ыли","ей","уй","ил","ыл","им","ым","ен","ят","ит","ыт","ую","ю"],[4,3,2,1]],c=[["иями","ями","ами","ией","иях","иям","ием","ев","ов","ие","ье","еи","ии","ей","ой","ий","ям","ем","ам","ом","ах","ях","ию","ью","ю","ия","ья","ю","и","о","у","ы","ь","й","е","а","я"],[4,3,2,1]],f=[["ейше","ейш"],[4,3]],h=[["ость","ост"],[4,3]];function l(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.vowels=["а","е","ё","и","о","у","ы","э","ю","я"],this.vowelCodes=[1072,1077,1105,1080,1086,1091,1099,1101,1102,1103],this.consonants=["б","в","г","д","ж","з","й","к","л","м","н","п","р","с","т","у","ф","х","ц","ч","ш","щ"],this.consonantCodes=[1073,1074,1075,1076,1078,1079,1081,1082,1083,1084,1085,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097]}return function(t,n,e){n&&l(t.prototype,n),e&&l(t,e)}(t,[{key:"getRV",value:function(t){for(var n=0;n<t.length-1;){if(t[n].in(this.consonantCodes)&&t[n+1].in(this.vowelCodes))return[t.slice(0,n+=2),t.slice(n)];n++}return[t,""]}},{key:"getR1",value:function(t){for(var n=0;n<t.length-1;){if(t[n].in(this.vowelCodes)&&t[n+1].in(this.consonantCodes))return[t.slice(0,n+=2),t.slice(n)];n++}return[t,""]}},{key:"getR2",value:function(t){for(var n=0;n<t.length-1;){if(t[n].in(this.vowelCodes)&&t[n+1].in(this.consonantCodes))return[t.slice(0,n+=2),t.slice(n)];n++}return[t,""]}},{key:"stemWords",value:function(t){for(var n=[],e=0;e<t.length;e++)n.push(this.stemWord(t[e]));return n}},{key:"stemWord",value:function(t){if(t.length<=2)return t;var n=[];t=t.split("-");for(var e=0;e<t.length;e++){var r,o,i,s,a,u,c=this.getRV(t[e])[0],f=void 0;!1!==(r=this.firstStep(t[e]))?(f=c+this.secondStep(r),i=this.getR1(f)[0],s=this.getR1(f)[1],a=this.getR2(s)[0],u=this.getR2(s)[1],f=a+this.thirdStep(u),o=this.fourthStep(f),n.push(i+o)):n.push(t[e])}return t.length>=2?n.join("-"):n[0]}},{key:"findEnding",value:function(t,n){var e="",r=[],o=0,i=t[1];3===t.length&&(i=t[2]);for(var s=0;s<i.length;s++)if(n.length>=i[s]&&(o=n.length-i[s],e=n.slice(o),r=3===t.length?"я"===n[o-1]||"а"===n[o-1]?t[0]:t[1]:t[0],e.inString(r))){if(n=n.slice(0,n.length-e.length),t===this.adjective){var a=this.findEnding(this.participle,n);!1!==a&&(n=a)}return n}return!1}},{key:"firstStep",value:function(t){var n,e,r,o,f,h=!1,l=this.getRV(t)[1];return!1!==(n=this.findEnding(i,t))?n:""!==l&&(!1!==(e=this.findEnding(a,l))&&(h=!0,l=e),0!=(r=this.findEnding(s,l))?r:!1!==(o=this.findEnding(u,l))?o:h||!1===(f=this.findEnding(c,l))?l:f)}},{key:"secondStep",value:function(t){return"и"===t[t.length-1]?t.slice(0,t.length-1):t}},{key:"thirdStep",value:function(t){if(t.length>=3){var n=this.findEnding(h,t);return 0!=n?n:t}return t}},{key:"fourthStep",value:function(t){var n;return"н"===t[t.length-1]&&"н"===t[t.length-2]?t.slice(0,t.length-1):!1!==(n=this.findEnding(f,t))?n:"ь"===t[t.length-1]?t.slice(0,t.length-1):t}}]),t}(),d=["дела","мног","может","быт","бол","сам","долж","друг","наш","вне","конец","сказа","такж","видел","мо","никогд","сейчас","из","на","тольк","или","немн","все","еще","так","зат","тот","их","там","этот","они","те","посл","как","во","он","имеет","её","зде","его","если","оно","за","подойд","мог","кажд","для","откуд","имет","имел","пот","был","до","явля","межд","но","от","иди","через","тож","под","над","очен","пут","мы","хорош","что","где","котор","пок","кто","кем","хотел","ты","тво","ве","видет","вопрос","данн","кардинальн","да","однак","же","называ","непривычн","нескольк","полност","когд","тем","лиш","едва","не","это","он","она","оно","они","нег","их","а","б","в","г","д","е","ж","з","и","й","к","л","м","н","о","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"];function g(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,n,e){n&&g(t.prototype,n),e&&g(t,e)}(t,null,[{key:"countDescriptors",value:function(t){for(var n={},e=0;e<t.length;e++)n[t[e]]=n.hasOwnProperty(t[e])?n[t[e]]+1:1;return n}},{key:"cleanDescriptors",value:function(t){for(var n in t)-1!==d.indexOf(n)&&delete t[n]}},{key:"compressDescriptors",value:function(t){for(var n=[],e=Object.keys(t),r=Object.values(t),o=0;o<Object.keys(t).length;o++)n.push([e[o],r[o]]);n=n.qsort(function(t,n){return t[1]>n[1]?1:t[1]===n[1]&&t[0]>n[0]?1:void 0}),t={};for(var i=0;i<n.length&&i<20;i++)t[n[i][0]]=n[i][1];return t}},{key:"getDescriptors",value:function(t){var n=this.countDescriptors(t);return this.cleanDescriptors(n),this.compressDescriptors(n)}}]),t}(),y=new o,b=new p;onmessage=function(t){try{"break"===t.data.action?postMessage({action:"break",result:y.breakText(t.data.text)}):"stem"===t.data.action?postMessage({action:"stem",result:b.stemWords(t.data.words)}):"descriptors"===t.data.action&&(console.table(v.getDescriptors(t.data.words)),postMessage({action:t.data.action,result:v.getDescriptors(t.data.words)}))}catch(t){postMessage({action:"error",error:t.stack})}}}]);',n.p+"worker.bundle.js")}},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}String.prototype.inString=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("object"!==n(e))throw new Error("Argument is not an array");return e.find(function(e){return e===t.toString()})},String.prototype.in=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if("object"!==n(e))throw new Error("Argument is not an array");return e.find(function(e){return e===t.charCodeAt(r)})},String.prototype.reverseStr=function(){return this.split("").reverse().join("")},String.prototype.multipleSpaces=function(){for(var t="",e=0;e<this.length;e++)this.in([32,160,65279],e)&&this.in([32,160,65279],e+1)||(t+=this[e]);return t},String.prototype.hyphenSpaces=function(){for(var t="",e=0;e<this.length;e++)this.in([32,160,65279],e)?45!==this.charCodeAt(e+1)&&45!==this.charCodeAt(e-1)&&(t+=this[e]):t+=this[e];return t},String.prototype.lineWrapping=function(){for(var t="",e=0;e<this.length;e++)this.in([10,13],e)?t+=" ":t+=this[e];return t}},function(t,e){Array.prototype.swap=function(t,e){var n=this[e];this[e]=this[t],this[t]=n},Array.prototype.isort=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-1,r=e+1;r<=n;r++)for(var o=r;o>0&&t(this[o],this[o-1]);o--)this.swap(o-1,o);return this},Array.prototype.qsort=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-1;if(void 0===t&&(t=function(t,e){return t<e?1:0}),"function"!=typeof t)throw new Error("Argument compareFn must be a function");if(n-e<=32)return this.isort(t,e,n);for(var r=e,o=n,i=this[Math.floor(e+Math.random()*(n+1-e))];r<=o;){for(;t(this[r],i);)r++;for(;t(i,this[o]);)o--;r<=o&&this.swap(r++,o--)}return e<o&&this.qsort(t,e,o),n>r&&this.qsort(t,r,n),this}},function(t,e,n){"use strict";var r=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(r.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(1),n(2);var r=function(t,e){return t>e?1:0},o=function(t,e){if(t[1]>e[1])return 1},i=[["вшись","вши","в"],["ывшись","ившись","ывши","ивши","ив","ыв"],[6,5,4,3,2,1]],s=[["его","ого","ему","ому","ими","ыми","ее","ие","ые","ое","ей","ий","ый","ой","ем","им","ым","ом","их","ых","ую","юю","ая","яя","ою","ею"],[3,2]],a=[["ся","сь"],[2]],u=[["ете","йте","ешь","нно","ла","на","ли","ем","ло","но","ет","ют","ны","ть","н","й","л"],["ейте","уйте","ует","уют","ило","ыло","ено","ила","ыла","ена","ите","или","ены","ить","ыть","ишь","ыли","ей","уй","ил","ыл","им","ым","ен","ят","ит","ыт","ую","ю"],[4,3,2,1]],c=[["иями","ями","ами","ией","иях","иям","ием","ев","ов","ие","ье","еи","ии","ей","ой","ий","ям","ем","ам","ом","ах","ях","ию","ью","ю","ия","ья","ю","и","о","у","ы","ь","й","е","а","я"],[4,3,2,1]],l=[["ейше","ейш"],[4,3]],h=[["ость","ост"],[4,3]];function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vowels=["а","е","ё","и","о","у","ы","э","ю","я"],this.vowelCodes=[1072,1077,1105,1080,1086,1091,1099,1101,1102,1103],this.consonants=["б","в","г","д","ж","з","й","к","л","м","н","п","р","с","т","у","ф","х","ц","ч","ш","щ"],this.consonantCodes=[1073,1074,1075,1076,1078,1079,1081,1082,1083,1084,1085,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097]}return function(t,e,n){e&&d(t.prototype,e),n&&d(t,n)}(t,[{key:"getRV",value:function(t){for(var e=0;e<t.length-1;){if(t[e].in(this.consonantCodes)&&t[e+1].in(this.vowelCodes))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}},{key:"getR1",value:function(t){for(var e=0;e<t.length-1;){if(t[e].in(this.vowelCodes)&&t[e+1].in(this.consonantCodes))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}},{key:"getR2",value:function(t){for(var e=0;e<t.length-1;){if(t[e].in(this.vowelCodes)&&t[e+1].in(this.consonantCodes))return[t.slice(0,e+=2),t.slice(e)];e++}return[t,""]}},{key:"stemWords",value:function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.stemWord(t[n]));return e}},{key:"stemWord",value:function(t){if(t.length<=2)return t;var e=[];t=t.split("-");for(var n=0;n<t.length;n++){var r,o,i,s,a,u,c=this.getRV(t[n])[0],l=void 0;!1!==(r=this.firstStep(t[n]))?(l=c+this.secondStep(r),i=this.getR1(l)[0],s=this.getR1(l)[1],a=this.getR2(s)[0],u=this.getR2(s)[1],l=a+this.thirdStep(u),o=this.fourthStep(l),e.push(i+o)):e.push(t[n])}return t.length>=2?e.join("-"):e[0]}},{key:"findEnding",value:function(t,e){var n="",r=[],o=0,i=t[1];3===t.length&&(i=t[2]);for(var s=0;s<i.length;s++)if(e.length>=i[s]&&(o=e.length-i[s],n=e.slice(o),r=3===t.length?"я"===e[o-1]||"а"===e[o-1]?t[0]:t[1]:t[0],n.inString(r))){if(e=e.slice(0,e.length-n.length),t===this.adjective){var a=this.findEnding(this.participle,e);!1!==a&&(e=a)}return e}return!1}},{key:"firstStep",value:function(t){var e,n,r,o,l,h=!1,d=this.getRV(t)[1];return!1!==(e=this.findEnding(i,t))?e:""!==d&&(!1!==(n=this.findEnding(a,d))&&(h=!0,d=n),0!=(r=this.findEnding(s,d))?r:!1!==(o=this.findEnding(u,d))?o:h||!1===(l=this.findEnding(c,d))?d:l)}},{key:"secondStep",value:function(t){return"и"===t[t.length-1]?t.slice(0,t.length-1):t}},{key:"thirdStep",value:function(t){if(t.length>=3){var e=this.findEnding(h,t);return 0!=e?e:t}return t}},{key:"fourthStep",value:function(t){var e;return"н"===t[t.length-1]&&"н"===t[t.length-2]?t.slice(0,t.length-1):!1!==(e=this.findEnding(l,t))?e:"ь"===t[t.length-1]?t.slice(0,t.length-1):t}}]),t}();function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var g=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.goodSymbol=function(t){return e.goodSymbols.find(function(e){return t>=e[0]&&t<=e[1]})},this.hyphen=function(t,n){return e.goodSymbol(t.charCodeAt(n-1))&&e.goodSymbol(t.charCodeAt(n+1))},this.goodSymbols=[[48,57],[97,122],[1072,1103],[1105,1105]]}return function(t,e,n){e&&p(t.prototype,e),n&&p(t,n)}(t,[{key:"breakText",value:function(t){t=t.toLowerCase();for(var e=[],n="",r=0;r<t.length;r++)this.goodSymbol(t.charCodeAt(r))||45===t.charCodeAt(r)&&this.hyphen(t,r)?n+=t[r]:""!==n.trim()&&(e.push(n),n="");return""!==n.trim()&&e.push(n),e}}]),t}();function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&v(t.prototype,e),n&&v(t,n)}(t,null,[{key:"countNGrams",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n={};return t.map(function(t){t=t.split("-");for(var r=0;r<t.length;r++)if(t[r].length>=e)for(var o=0;o<t[r].length-e+1;o++){var i=t[r].slice(o,o+e);n[i]=n.hasOwnProperty(i)?n[i]+1:1}}),n}}]),t}();function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&m(t.prototype,e),n&&m(t,n)}(t,null,[{key:"encodeBase64",value:function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))}},{key:"decodeBase64",value:function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}}]),t}();function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var w=new g,k=new f,L=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&S(t.prototype,e),n&&S(t,n)}(t,null,[{key:"handleRequest",value:function(t){var e=w.breakText(t.multipleSpaces().hyphenSpaces());return k.stemWords(e)}},{key:"calcWeights",value:function(t,e,n){for(var r=0,o=0,i=0,s=[],a=0;a<t.length;a++){var u=e.indexOf(t[a]);-1!==u&&(o++,r+=n[u])}if(o===t.length)for(var c=0;c<t.length;c++)s.push(n[e.indexOf(t[c])]/r);else if(o>0&&o<t.length){r+=(i=r/o)*(t.length-o);for(var l=0;l<t.length;l++){var h=e.indexOf(t[l]);s.push(-1!==h?n[h]/r:i/r)}}else for(var d=0;d<t.length;d++)s.push(1/t.length);return s}},{key:"calculateR",value:function(t){for(var e,n={},r=[],i=0;i<localStorage.length;i++){var s=0;try{if("document"===(e=JSON.parse(localStorage.getItem(localStorage.key(i)))).type){0;for(var a=this.calcWeights(t,e.descriptors,e.n),u=0;u<t.length;u++){var c=e.descriptors.indexOf(t[u]);-1!==c&&(c<4?s+=1*a[u]:c<10?s+=.5*a[u]:c<20&&(s+=1/3*a[u]))}s=Math.round(s/t.length*100),r.push([b.decodeBase64(localStorage.key(i)),s])}}finally{continue}}r.qsort(o);for(var l=0;l<r.length;l++)n[r[l][0]]=r[l][1];return n}}]),t}();function C(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var B=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&C(t.prototype,e),n&&C(t,n)}(t,null,[{key:"renderSteps",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];t.map(function(t,r){e[r]?t.classList.add("animate"):t.classList.remove("animate"),n[r]?t.classList.add("active"):t.classList.remove("active")})}},{key:"loader",value:function(t){document.querySelector(".lds-ellipsis").attributeStyleMap.set("opacity",t?"1":"0")}},{key:"createElement",value:function(t,e,n){var r;return r=document.createElement(t),e&&(r.className=e),n&&(r.innerHTML=n),r}},{key:"createLine",value:function(t,e,n){var r,o;return r=this.createElement("div","line"),o=this.createElement("div","number",t+1),r.appendChild(o),o=this.createElement("div","word",e),r.appendChild(o),n&&(o=this.createElement("div","word",n),r.appendChild(o)),r}},{key:"print",value:function(t,e){var n,r=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.length?(t.innerHTML="",e.map(function(e,i){n=r.createLine(i,e,o[i]),t.appendChild(n)})):(t.innerHTML="",t.appendChild(this.createLine(0,"","")))}},{key:"printDocuments",value:function(t,e){t.innerHTML="";for(var n=Object.keys(e),r=Object.values(e),o=0,i=0;i<n.length;i++)if(0!==r[i]){o++;var s=this.createElement("div","document"),a=this.createElement("div","num",o);s.appendChild(a),a=this.createElement("div","title",n[i]+"..."),s.appendChild(a),a=this.createElement("div","docinfo","Релевантность: ".concat(r[i],"%")),s.appendChild(a),s.classList.add("animation"),t.appendChild(s)}return o}}]),t}(),E=n(0),O=n.n(E);function j(t){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function x(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}new f,new g;var q=new O.a,A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state=Object.freeze({isInputChanged:!0,isSearchBoxOpen:!1,direction:1,wordList:[],stemmedList:[],nGramKeys:[],nGramValues:[],descriptorsKeys:[],descriptorsValues:[],currentList:["wordList"]}),this.input=document.querySelector("textarea"),this.output=document.querySelector(".linesbox"),this.lineNumberBox=document.querySelector(".lines"),this.searchButton=document.querySelector(".searchbutton"),this.search=document.querySelector(".search"),this.searchInput=document.querySelector(".searchinput"),this.documentsBox=document.querySelector(".documents"),this.breakWordButton=document.querySelector("a[data-type=breaktext]"),this.stemmingButton=document.querySelector("a[data-type=stemming]"),this.podButton=document.querySelector("a[data-type=pod]"),this.buttons=[this.breakWordButton,this.stemmingButton,this.podButton],this.ascSortButton=document.querySelector("div[data-type=asc]"),this.descSortButton=document.querySelector("div[data-type=desc]"),this.nGramButton=document.querySelector(".ngram"),this.directionButton=document.querySelector(".direction"),this.fileLoader=document.querySelector("#fileloader"),this.breakWordButtonHandler=this.breakWordButtonHandler.bind(this),this.stemmingButtonHandler=this.stemmingButtonHandler.bind(this),this.podButtonHandler=this.podButtonHandler.bind(this),this.workerHandler=this.workerHandler.bind(this),this.createListeners()}return function(t,e,n){e&&M(t.prototype,e),n&&M(t,n)}(t,[{key:"dispatch",value:function(t,e){this.state=Object.freeze(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){x(t,e,n[e])})}return t}({},t,e))}},{key:"sortHandler",value:function(t){var e,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.state,s=i.currentList,a=i.direction,u=[],c=[],l=[];if("object"!==j(s)||!s.length)return!1;if(2===s.length){e=o.hasOwnProperty("side")?o.side:1,n=o.hasOwnProperty("order")&&"desc"===o.order?function(t,n){return t[e]>n[e]?1:0}:function(t,n){return t[e]<n[e]?1:0};for(var h=0;h<this.state[s[0]].length;h++){var d=a?this.state[s[0]][h]:this.state[s[0]][h].toString().reverseStr(),f=a?this.state[s[1]][h]:this.state[s[1]][h].toString().reverseStr();u.push([d,f])}u.qsort(n).map(function(t){c.push(a?t[0]:t[0].toString().reverseStr()),l.push(a?t[1]:t[1].toString().reverseStr())}),B.print(this.output,c,l)}else{o.hasOwnProperty("order")&&(n="desc"===o.order?r:void 0);var p=this.state[s[0]].slice();p=a?p.qsort(n):(p=p.map(function(t){return t.toString().reverseStr()})).qsort(n).map(function(t){return t.toString().reverseStr()}),B.print(this.output,p)}}},{key:"createListeners",value:function(){var t=this,e=new FileReader;e.addEventListener("loadend",function(e){t.input.value=e.target.result}),this.fileLoader.addEventListener("change",function(t){var n=t.target.files[0];e.readAsText(n)}),this.ascSortButton.addEventListener("click",function(e){return t.sortHandler(e)}),this.descSortButton.addEventListener("click",function(e){return t.sortHandler(e,{order:"desc"})}),this.directionButton.addEventListener("click",function(e){t.directionButton.attributeStyleMap.set("transform","rotateZ(".concat(CSS.deg(t.state.direction?180:0),")")),t.dispatch(t.state,{direction:!t.state.direction})}),this.searchButton.addEventListener("click",function(e){t.state.isSearchBoxOpen?(t.search.attributeStyleMap.set("opacity","0"),t.search.attributeStyleMap.set("pointer-events","none"),t.searchInput.classList.remove("animation"),t.documentsBox.classList.remove("animation"),t.searchButton.classList.remove("close")):(t.search.attributeStyleMap.set("opacity","1"),t.search.attributeStyleMap.set("pointer-events","unset"),t.searchInput.classList.add("animation"),t.documentsBox.classList.add("animation"),t.searchButton.classList.add("close")),t.dispatch(t.state,{isSearchBoxOpen:!t.state.isSearchBoxOpen})}),this.searchInput.addEventListener("change",function(e){if(""!==e.target.value.trim()){var n=L.handleRequest(t.searchInput.value),r=L.calculateR(n);t.search.style.background="rgba(255,255,255, 0.95)",t.documentsBox.attributeStyleMap.set("padding-left",CSS.px(15)),B.printDocuments(t.documentsBox,r)||(t.documentsBox.textContent="По вашему запросу ничего не найдено",t.documentsBox.attributeStyleMap.set("padding-left",CSS.px(20)))}else t.documentsBox.innerHTML="",t.search.style.background="rgba(0, 0, 0, 0.2)"}),this.nGramButton.addEventListener("click",function(e){if(t.state.wordList.length){var n=y.countNGrams(t.state.wordList,3);t.dispatch(t.state,{nGramKeys:Object.keys(n),nGramValues:Object.values(n),currentList:["nGramKeys","nGramValues"]}),B.print(t.output,t.state.nGramKeys,t.state.nGramValues)}}),this.breakWordButton.addEventListener("click",this.breakWordButtonHandler),this.stemmingButton.addEventListener("click",this.stemmingButtonHandler),this.podButton.addEventListener("click",this.podButtonHandler),document.querySelector(".outputbox").addEventListener("click",function(t){"percent"===t.target.className&&(document.querySelector("main").attributeStyleMap.set("grid-template-columns","".concat(CSS.percent(100-t.target.dataset.percent)," ").concat(CSS.percent(t.target.dataset.percent))),t.target.dataset.percent=125-t.target.dataset.percent)}),this.input.addEventListener("change",function(e){t.dispatch({isInputChanged:!0})}),q.addEventListener("message",this.workerHandler)}},{key:"workerHandler",value:function(t){var e=t.data;if("break"===e.action)B.print(this.output,e.result),B.renderSteps(this.buttons,[!0,!0],[!0]),this.dispatch(this.state,{wordList:e.result,isInputChanged:!1,stemmedList:[],currentList:["wordList"]});else if("stem"===e.action)B.print(this.output,this.state.wordList,e.result),B.renderSteps([this.stemmingButton,this.podButton],[!0,!0],[!0]),this.dispatch(this.state,{stemmedList:e.result,currentList:["wordList","stemmedList"]});else if("descriptors"===e.action){var n=Object.keys(e.result),r=Object.values(e.result);localStorage.setItem(b.encodeBase64(this.state.wordList.slice(0,10).join(" ")),JSON.stringify({descriptors:n,n:r,type:"document"})),B.print(this.output,n,r),B.renderSteps([this.podButton],[!0],[!0]),this.dispatch(this.state,{descriptorsKeys:n,descriptorsValues:r,currentList:["descriptorsKeys","descriptorsValues"]})}else console.log(t.data.error);B.loader(!1)}},{key:"breakWordButtonHandler",value:function(t){t.preventDefault();var e=this.state,n=e.isInputChanged,r=e.wordList;e.sortedList;if(!n)return this.dispatch(this.state,{currentList:["wordList"]}),B.print(this.output,r),B.renderSteps(this.buttons,[!0,!0],[!0]),!1;B.loader(!0),q.postMessage({action:"break",text:this.input.value.multipleSpaces().hyphenSpaces()})}},{key:"stemmingButtonHandler",value:function(t){t.preventDefault();var e=this.state,n=e.wordList,r=e.stemmedList;if(r.length)return this.dispatch(this.state,{currentList:["wordList","stemmedList"]}),B.print(this.output,n,r),B.renderSteps([this.stemmingButton,this.podButton],[!0,!0],[!0]),!1;B.loader(!0),q.postMessage({action:"stem",words:n.slice()})}},{key:"podButtonHandler",value:function(t){var e=this.state.stemmedList;t.preventDefault(),B.loader(!0),q.postMessage({action:"descriptors",words:e.slice()})}}]),t}();n(4),n(5),new A}]);